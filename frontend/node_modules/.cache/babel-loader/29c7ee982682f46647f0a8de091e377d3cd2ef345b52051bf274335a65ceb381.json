{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import axios from'axios';import{format,formatDistanceToNow,parseISO}from'date-fns';import{Car,MapPin,Clock,Users,DollarSign,Search,Plus,LogOut,User,Check,X,AlertTriangle,Repeat,Zap,Navigation,ChevronRight,Filter,Star,Calendar,Shield,ShieldCheck,ShieldAlert,History,ThumbsUp,MessageSquare,Award,Leaf,TrendingUp,Target,Flame,Trophy,BookOpen,GraduationCap,Tag,BarChart3,ChevronDown}from'lucide-react';import'./App.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_BACKEND_URL||'http://localhost:8001';// API instance with auth header\nconst api=axios.create({baseURL:API_URL});api.interceptors.request.use(config=>{const token=localStorage.getItem('token');if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;});// Auth Context\nconst useAuth=()=>{const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const fetchUserInfo=async()=>{try{const response=await api.get('/api/auth/me');setUser(response.data);localStorage.setItem('user',JSON.stringify(response.data));}catch(err){console.error('Failed to fetch user info:',err);}};useEffect(()=>{const token=localStorage.getItem('token');const userData=localStorage.getItem('user');if(token&&userData){setUser(JSON.parse(userData));fetchUserInfo();}setLoading(false);},[]);const login=async(email,password)=>{const response=await api.post('/api/auth/login',{email,password});localStorage.setItem('token',response.data.access_token);localStorage.setItem('user',JSON.stringify(response.data.user));setUser(response.data.user);return response.data;};const signup=async(email,password,name,role,branch,academicYear)=>{const response=await api.post('/api/auth/signup',{email,password,name,role,branch:branch||null,academic_year:academicYear||null});localStorage.setItem('token',response.data.access_token);localStorage.setItem('user',JSON.stringify(response.data.user));setUser(response.data.user);return response.data;};const logout=()=>{localStorage.removeItem('token');localStorage.removeItem('user');setUser(null);};return{user,loading,login,signup,logout,fetchUserInfo};};// Components\nconst Badge=_ref=>{let{variant,children,className=''}=_ref;const variants={urgent:'bg-red-100 text-red-800 border-red-200',recommended:'bg-green-100 text-green-800 border-green-200',recurring:'bg-purple-100 text-purple-800 border-purple-200',pending:'bg-yellow-100 text-yellow-800 border-yellow-200',accepted:'bg-green-100 text-green-800 border-green-200',rejected:'bg-red-100 text-red-800 border-red-200',completed:'bg-blue-100 text-blue-800 border-blue-200',cancelled:'bg-gray-100 text-gray-800 border-gray-200',trusted:'bg-emerald-100 text-emerald-800 border-emerald-200',new_user:'bg-sky-100 text-sky-800 border-sky-200',low_rating:'bg-orange-100 text-orange-800 border-orange-200',regular:'bg-slate-100 text-slate-700 border-slate-200',event:'bg-indigo-100 text-indigo-800 border-indigo-200',eco:'bg-green-100 text-green-800 border-green-200',streak:'bg-orange-100 text-orange-800 border-orange-200',default:'bg-gray-100 text-gray-800 border-gray-200'};return/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs font-medium rounded-full border \".concat(variants[variant]||variants.default,\" \").concat(className),\"data-testid\":\"badge-\".concat(variant),children:children});};const LoadingSpinner=()=>/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center p-8\",\"data-testid\":\"loading-spinner\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"})});// Event Tag Badge Component\nconst EventTagBadge=_ref2=>{let{eventTag}=_ref2;if(!eventTag)return null;return/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full border\",style:{backgroundColor:\"\".concat(eventTag.color,\"20\"),borderColor:eventTag.color,color:eventTag.color},\"data-testid\":\"event-tag-\".concat(eventTag.id),children:[/*#__PURE__*/_jsx(\"span\",{children:eventTag.icon}),eventTag.name]});};// Trust Badge Component\nconst TrustBadge=_ref3=>{let{trust,showRating=true,size='md'}=_ref3;if(!trust)return null;const{trustLabel,avgRating,totalRides,ratingCount}=trust;const labelConfig={trusted:{icon:ShieldCheck,text:'Trusted',color:'text-emerald-600'},new_user:{icon:Shield,text:'New User',color:'text-sky-600'},low_rating:{icon:ShieldAlert,text:'Low Rating',color:'text-orange-600'},regular:{icon:Shield,text:'Regular',color:'text-slate-600'}};const config=labelConfig[trustLabel]||labelConfig.regular;const Icon=config.icon;const sizeClasses=size==='sm'?'text-xs':'text-sm';return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 \".concat(sizeClasses),\"data-testid\":\"trust-badge\",children:[/*#__PURE__*/_jsxs(Badge,{variant:trustLabel,children:[/*#__PURE__*/_jsx(Icon,{className:\"w-3 h-3 inline mr-1\"}),config.text]}),showRating&&ratingCount>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-1 text-gray-600\",children:[/*#__PURE__*/_jsx(Star,{className:\"w-3 h-3 text-yellow-500 fill-yellow-500\"}),avgRating,\" (\",ratingCount,\")\"]}),totalRides>0&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-500\",children:[totalRides,\" ride\",totalRides!==1?'s':'']})]});};// Star Rating Input Component\nconst StarRatingInput=_ref4=>{let{rating,setRating,size='lg'}=_ref4;const[hover,setHover]=useState(0);const sizeClass=size==='lg'?'w-8 h-8':'w-5 h-5';return/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-1\",\"data-testid\":\"star-rating-input\",children:[1,2,3,4,5].map(star=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setRating(star),onMouseEnter:()=>setHover(star),onMouseLeave:()=>setHover(0),className:\"focus:outline-none transition-transform hover:scale-110\",\"data-testid\":\"star-\".concat(star),children:/*#__PURE__*/_jsx(Star,{className:\"\".concat(sizeClass,\" \").concat(star<=(hover||rating)?'text-yellow-400 fill-yellow-400':'text-gray-300')})},star))});};// Rating Modal Component\nconst RatingModal=_ref5=>{let{isOpen,onClose,rideId,userToRate,onSubmit}=_ref5;const[rating,setRating]=useState(0);const[feedback,setFeedback]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState('');const handleSubmit=async()=>{if(rating===0){setError('Please select a rating');return;}setLoading(true);setError('');try{await onSubmit({ride_id:rideId,rated_user_id:userToRate.userId,rating,feedback:feedback.trim()||null});setRating(0);setFeedback('');onClose();}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.detail)||'Failed to submit rating');}finally{setLoading(false);}};if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",\"data-testid\":\"rating-modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl w-full max-w-md p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900 mb-2\",children:\"Rate Your Experience\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mb-6\",children:[\"How was your ride with \",userToRate===null||userToRate===void 0?void 0:userToRate.userName,\"?\"]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4\",\"data-testid\":\"rating-error\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-6\",children:/*#__PURE__*/_jsx(StarRatingInput,{rating:rating,setRating:setRating})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(MessageSquare,{className:\"w-4 h-4 inline mr-1\"}),\"Feedback (optional)\"]}),/*#__PURE__*/_jsx(\"textarea\",{value:feedback,onChange:e=>setFeedback(e.target.value),className:\"input-field h-24 resize-none\",placeholder:\"Share your experience...\",maxLength:500,\"data-testid\":\"rating-feedback-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,disabled:loading||rating===0,className:\"flex-1 btn-primary py-3 disabled:opacity-50\",\"data-testid\":\"submit-rating-btn\",children:loading?'Submitting...':'Submit Rating'}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"btn-secondary py-3\",\"data-testid\":\"cancel-rating-btn\",children:\"Later\"})]})]})});};// Safe Completion Button Component\nconst SafeCompletionButton=_ref6=>{let{rideId,onConfirm,confirmed}=_ref6;const[loading,setLoading]=useState(false);const handleConfirm=async()=>{setLoading(true);try{await onConfirm(rideId);}finally{setLoading(false);}};if(confirmed){return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-green-600 bg-green-50 px-3 py-2 rounded-lg\",\"data-testid\":\"safe-confirmed\",children:[/*#__PURE__*/_jsx(ShieldCheck,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Reached Safely\"})]});}return/*#__PURE__*/_jsxs(\"button\",{onClick:handleConfirm,disabled:loading,className:\"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50\",\"data-testid\":\"confirm-safe-btn\",children:[/*#__PURE__*/_jsx(ThumbsUp,{className:\"w-5 h-5\"}),loading?'Confirming...':'Reached Safely']});};// User Badge Display Component\nconst UserBadgeDisplay=_ref7=>{let{badges,compact=false}=_ref7;if(!badges||badges.length===0)return null;const displayBadges=compact?badges.slice(0,3):badges;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2\",\"data-testid\":\"user-badges\",children:[displayBadges.map(badge=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200 rounded-full text-xs\",title:badge.description,children:[/*#__PURE__*/_jsx(\"span\",{children:badge.icon}),!compact&&/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-amber-800\",children:badge.name})]},badge.id)),compact&&badges.length>3&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500\",children:[\"+\",badges.length-3,\" more\"]})]});};// Streak Display Component\nconst StreakDisplay=_ref8=>{let{streak}=_ref8;if(!streak||streak.currentStreak===0)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 px-3 py-2 bg-orange-50 border border-orange-200 rounded-lg\",\"data-testid\":\"streak-display\",children:[/*#__PURE__*/_jsx(Flame,{className:\"w-5 h-5 text-orange-500\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-bold text-orange-700\",children:streak.currentStreak}),/*#__PURE__*/_jsx(\"span\",{className:\"text-orange-600 text-sm ml-1\",children:\"day streak\"})]}),streak.longestStreak>streak.currentStreak&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-orange-500 ml-2\",children:[\"Best: \",streak.longestStreak]})]});};// Eco Impact Card Component\nconst EcoImpactCard=_ref9=>{var _stats$moneySaved;let{stats}=_ref9;if(!stats)return null;const co2Saved=stats.co2SavedKg||0;const treesEquivalent=(co2Saved/21).toFixed(1);return/*#__PURE__*/_jsxs(\"div\",{className:\"card bg-gradient-to-br from-green-50 to-emerald-50 border-green-200\",\"data-testid\":\"eco-impact-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center\",children:/*#__PURE__*/_jsx(Leaf,{className:\"w-6 h-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-green-800\",children:\"Your Eco Impact\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-green-600\",children:\"Making the planet greener\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 bg-white bg-opacity-60 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-green-700\",children:co2Saved.toFixed(1)}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-green-600\",children:\"kg CO\\u2082 Saved\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 bg-white bg-opacity-60 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-green-700\",children:treesEquivalent}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-green-600\",children:\"\\uD83C\\uDF33 Trees Equivalent\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 bg-white bg-opacity-60 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-green-700\",children:stats.totalDistanceKm||0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-green-600\",children:\"km Shared\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 bg-white bg-opacity-60 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-green-700\",children:[\"$\",((_stats$moneySaved=stats.moneySaved)===null||_stats$moneySaved===void 0?void 0:_stats$moneySaved.toFixed(0))||0]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-green-600\",children:\"Money Saved\"})]})]})]});};// Weekly Summary Card Component\nconst WeeklySummaryCard=_ref0=>{var _summary$co2SavedKg,_summary$moneySaved,_summary$distanceKm;let{summary}=_ref0;if(!summary)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"card bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200\",\"data-testid\":\"weekly-summary-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center\",children:/*#__PURE__*/_jsx(BarChart3,{className:\"w-6 h-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-blue-800\",children:\"This Week\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-600\",children:\"Your 7-day activity\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 bg-white bg-opacity-60 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold text-blue-700\",children:summary.totalRides}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-blue-600\",children:\"Rides\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 bg-white bg-opacity-60 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold text-green-700\",children:(_summary$co2SavedKg=summary.co2SavedKg)===null||_summary$co2SavedKg===void 0?void 0:_summary$co2SavedKg.toFixed(1)}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-green-600\",children:\"kg CO\\u2082\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 bg-white bg-opacity-60 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-xl font-bold text-amber-700\",children:[\"$\",(_summary$moneySaved=summary.moneySaved)===null||_summary$moneySaved===void 0?void 0:_summary$moneySaved.toFixed(0)]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-amber-600\",children:\"Saved\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-blue-200 flex justify-between text-sm\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-blue-600\",children:[\"Offered: \",summary.ridesOffered]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-blue-600\",children:[\"Taken: \",summary.ridesTaken]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-blue-600\",children:[(_summary$distanceKm=summary.distanceKm)===null||_summary$distanceKm===void 0?void 0:_summary$distanceKm.toFixed(0),\" km\"]})]})]});};// Statistics Dashboard Component\nconst StatisticsDashboard=_ref1=>{let{user}=_ref1;const[statistics,setStatistics]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const fetchStats=async()=>{try{const response=await api.get('/api/users/me/statistics');setStatistics(response.data);}catch(err){console.error('Failed to fetch statistics:',err);}finally{setLoading(false);}};fetchStats();},[]);if(loading)return/*#__PURE__*/_jsx(LoadingSpinner,{});if(!statistics)return null;const{statistics:stats,streak,weeklySummary,badges}=statistics;return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",\"data-testid\":\"statistics-dashboard\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"w-6 h-6 text-blue-600\"}),\"Your Statistics\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 bg-blue-50 rounded-xl\",children:[/*#__PURE__*/_jsx(Car,{className:\"w-6 h-6 text-blue-600 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-gray-900\",children:stats.totalRides}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Total Rides\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 bg-purple-50 rounded-xl\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-6 h-6 text-purple-600 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-gray-900\",children:stats.ridesTaken}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Rides Taken\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 bg-green-50 rounded-xl\",children:[/*#__PURE__*/_jsx(Car,{className:\"w-6 h-6 text-green-600 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-gray-900\",children:stats.ridesOffered}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Rides Offered\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 bg-amber-50 rounded-xl\",children:[/*#__PURE__*/_jsx(Navigation,{className:\"w-6 h-6 text-amber-600 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-gray-900\",children:stats.totalDistanceKm}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"km Traveled\"})]})]}),streak&&streak.currentStreak>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(StreakDisplay,{streak:streak})})]}),badges&&badges.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-bold text-gray-900 mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Trophy,{className:\"w-5 h-5 text-amber-500\"}),\"Your Badges\"]}),/*#__PURE__*/_jsx(UserBadgeDisplay,{badges:badges})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsx(EcoImpactCard,{stats:stats}),/*#__PURE__*/_jsx(WeeklySummaryCard,{summary:weeklySummary})]})]});};// Auth Page\nconst AuthPage=_ref10=>{let{onLogin}=_ref10;const[isLogin,setIsLogin]=useState(true);const[formData,setFormData]=useState({email:'',password:'',name:'',role:'rider',branch:'',academicYear:''});const[academicOptions,setAcademicOptions]=useState({branches:[],academic_years:[]});const[error,setError]=useState('');const[loading,setLoading]=useState(false);useEffect(()=>{const fetchOptions=async()=>{try{const response=await api.get('/api/academic-options');setAcademicOptions(response.data);}catch(err){console.error('Failed to fetch academic options:',err);}};fetchOptions();},[]);const handleSubmit=async e=>{e.preventDefault();setError('');setLoading(true);try{if(isLogin){await onLogin(formData.email,formData.password);}else{await onLogin(formData.email,formData.password,formData.name,formData.role,formData.branch,formData.academicYear,true);}}catch(err){var _err$response2,_err$response2$data;setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.detail)||'An error occurred');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-600 to-purple-700 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl w-full max-w-md p-8\",\"data-testid\":\"auth-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(Car,{className:\"w-8 h-8 text-white\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"CampusPool\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1\",children:\"Ride sharing for college students\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex mb-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsLogin(true),className:\"flex-1 py-2 text-center font-medium transition-colors \".concat(isLogin?'text-blue-600 border-b-2 border-blue-600':'text-gray-500'),\"data-testid\":\"login-tab\",children:\"Login\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsLogin(false),className:\"flex-1 py-2 text-center font-medium transition-colors \".concat(!isLogin?'text-blue-600 border-b-2 border-blue-600':'text-gray-500'),\"data-testid\":\"signup-tab\",children:\"Sign Up\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4\",\"data-testid\":\"auth-error\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[!isLogin&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.name,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{name:e.target.value})),className:\"input-field\",placeholder:\"John Doe\",required:!isLogin,\"data-testid\":\"name-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:formData.email,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{email:e.target.value})),className:\"input-field\",placeholder:\"you@college.edu\",required:true,\"data-testid\":\"email-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:formData.password,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{password:e.target.value})),className:\"input-field\",placeholder:\"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",required:true,minLength:6,\"data-testid\":\"password-input\"})]}),!isLogin&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"I want to\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setFormData(_objectSpread(_objectSpread({},formData),{},{role:'rider'})),className:\"p-4 rounded-xl border-2 transition-all \".concat(formData.role==='rider'?'border-blue-600 bg-blue-50':'border-gray-200 hover:border-gray-300'),\"data-testid\":\"rider-role-btn\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-6 h-6 mx-auto mb-2 text-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Find Rides\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setFormData(_objectSpread(_objectSpread({},formData),{},{role:'driver'})),className:\"p-4 rounded-xl border-2 transition-all \".concat(formData.role==='driver'?'border-blue-600 bg-blue-50':'border-gray-200 hover:border-gray-300'),\"data-testid\":\"driver-role-btn\",children:[/*#__PURE__*/_jsx(Car,{className:\"w-6 h-6 mx-auto mb-2 text-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Offer Rides\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:[/*#__PURE__*/_jsx(GraduationCap,{className:\"w-4 h-4 inline mr-1\"}),\"Branch\"]}),/*#__PURE__*/_jsxs(\"select\",{value:formData.branch,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{branch:e.target.value})),className:\"input-field\",\"data-testid\":\"branch-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select branch\"}),academicOptions.branches.map(b=>/*#__PURE__*/_jsx(\"option\",{value:b,children:b},b))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:[/*#__PURE__*/_jsx(BookOpen,{className:\"w-4 h-4 inline mr-1\"}),\"Year\"]}),/*#__PURE__*/_jsxs(\"select\",{value:formData.academicYear,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{academicYear:e.target.value})),className:\"input-field\",\"data-testid\":\"year-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select year\"}),academicOptions.academic_years.map(y=>/*#__PURE__*/_jsx(\"option\",{value:y,children:y},y))]})]})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"w-full btn-primary py-3 text-lg disabled:opacity-50\",\"data-testid\":\"auth-submit-btn\",children:loading?'Please wait...':isLogin?'Login':'Create Account'})]})]})});};// Ride Card Component\nconst RideCard=_ref11=>{let{ride,onRequest,userRole,showRequestBtn=true}=_ref11;const[isUrgent,setIsUrgent]=useState(false);const[requesting,setRequesting]=useState(false);const departureTime=parseISO(ride.departureTime);const hoursUntilDeparture=(departureTime-new Date())/(1000*60*60);const canBeUrgent=hoursUntilDeparture<=2&&hoursUntilDeparture>0;const handleRequest=async()=>{setRequesting(true);try{await onRequest(ride.id,isUrgent);}finally{setRequesting(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"card hover:shadow-md transition-shadow \".concat(ride.isRecommended?'ring-2 ring-green-500':''),\"data-testid\":\"ride-card-\".concat(ride.id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 mb-3\",children:[ride.eventTag&&/*#__PURE__*/_jsx(EventTagBadge,{eventTag:ride.eventTag}),ride.isRecommended&&/*#__PURE__*/_jsxs(Badge,{variant:\"recommended\",children:[/*#__PURE__*/_jsx(Star,{className:\"w-3 h-3 inline mr-1\"}),\"Recommended\"]}),ride.isRecurring&&/*#__PURE__*/_jsxs(Badge,{variant:\"recurring\",children:[/*#__PURE__*/_jsx(Repeat,{className:\"w-3 h-3 inline mr-1\"}),ride.recurrencePattern||'Recurring']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 rounded-full bg-green-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:ride.source})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 rounded-full bg-red-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:ride.destination})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg font-bold text-blue-600\",children:[\"$\",ride.costPerRider]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"per seat\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3 mb-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-gray-600\",children:[/*#__PURE__*/_jsx(Clock,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:format(departureTime,'MMM d, h:mm a')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-gray-600\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[ride.availableSeats,\" of \",ride.totalSeats,\" seats\"]})]}),ride.pickupPoint&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-gray-600 col-span-2\",children:[/*#__PURE__*/_jsx(Navigation,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Pickup: \",ride.pickupPoint]})]}),ride.distanceKm&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-gray-600\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[ride.distanceKm,\" km\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between pt-3 border-t border-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(User,{className:\"w-4 h-4 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-700 block\",children:ride.driverName}),(ride.driverBranch||ride.driverYear)&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500\",children:[ride.driverBranch,ride.driverBranch&&ride.driverYear?' • ':'',ride.driverYear]}),ride.driverTrust&&/*#__PURE__*/_jsx(TrustBadge,{trust:ride.driverTrust,size:\"sm\"})]})]}),showRequestBtn&&userRole==='rider'&&ride.availableSeats>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[canBeUrgent&&/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-1 text-sm cursor-pointer\",\"data-testid\":\"urgent-toggle\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:isUrgent,onChange:e=>setIsUrgent(e.target.checked),className:\"rounded text-red-600 focus:ring-red-500\"}),/*#__PURE__*/_jsx(Zap,{className:\"w-4 h-4 text-red-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-red-600 font-medium\",children:\"Urgent\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRequest,disabled:requesting,className:\"btn-primary flex items-center gap-2\",\"data-testid\":\"request-ride-btn\",children:requesting?'Requesting...':'Request Ride'})]})]})]});};// Ride Search/Filter Component with Community Filters\nconst RideSearch=_ref12=>{var _academicOptions$bran,_academicOptions$acad;let{onSearch,pickupPoints,eventTags,academicOptions}=_ref12;const[filters,setFilters]=useState({source:'',destination:'',timeWindowStart:'',timeWindowEnd:'',eventTag:'',branch:'',academicYear:''});const[showFilters,setShowFilters]=useState(false);const[showCommunity,setShowCommunity]=useState(false);const handleSearch=()=>{onSearch(filters);};const handleReset=()=>{setFilters({source:'',destination:'',timeWindowStart:'',timeWindowEnd:'',eventTag:'',branch:'',academicYear:''});onSearch({});};return/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-6\",\"data-testid\":\"ride-search\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold text-gray-900 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Search,{className:\"w-5 h-5 text-blue-600\"}),\"Find Rides\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowCommunity(!showCommunity),className:\"flex items-center gap-1 text-sm font-medium px-3 py-1 rounded-full \".concat(showCommunity?'bg-purple-100 text-purple-700':'text-purple-600 hover:bg-purple-50'),\"data-testid\":\"toggle-community-btn\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-4 h-4\"}),\"Community\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowFilters(!showFilters),className:\"flex items-center gap-1 text-blue-600 text-sm font-medium\",\"data-testid\":\"toggle-filters-btn\",children:[/*#__PURE__*/_jsx(Filter,{className:\"w-4 h-4\"}),showFilters?'Hide':'More',\" Filters\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"From\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:filters.source,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{source:e.target.value})),className:\"input-field\",placeholder:\"Enter source location\",\"data-testid\":\"search-source-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"To\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:filters.destination,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{destination:e.target.value})),className:\"input-field\",placeholder:\"Enter destination\",\"data-testid\":\"search-destination-input\"})]})]}),eventTags&&eventTags.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(Tag,{className:\"w-4 h-4 inline mr-1\"}),\"Filter by Event\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setFilters(_objectSpread(_objectSpread({},filters),{},{eventTag:''})),className:\"px-3 py-1 rounded-full text-sm border transition-colors \".concat(!filters.eventTag?'bg-blue-100 border-blue-300 text-blue-700':'border-gray-200 hover:border-gray-300'),\"data-testid\":\"event-all-btn\",children:\"All Events\"}),eventTags.map(tag=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setFilters(_objectSpread(_objectSpread({},filters),{},{eventTag:tag.id})),className:\"px-3 py-1 rounded-full text-sm border transition-colors \".concat(filters.eventTag===tag.id?'border-2':'border-gray-200 hover:border-gray-300'),style:filters.eventTag===tag.id?{backgroundColor:\"\".concat(tag.color,\"20\"),borderColor:tag.color,color:tag.color}:{},\"data-testid\":\"event-filter-\".concat(tag.id),children:[tag.icon,\" \",tag.name]},tag.id))]})]}),showCommunity&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-purple-50 rounded-lg border border-purple-200\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-medium text-purple-800 mb-3 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(GraduationCap,{className:\"w-4 h-4\"}),\"Find Rides from Your Community\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Branch\"}),/*#__PURE__*/_jsxs(\"select\",{value:filters.branch,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{branch:e.target.value})),className:\"input-field\",\"data-testid\":\"filter-branch-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Branches\"}),academicOptions===null||academicOptions===void 0?void 0:(_academicOptions$bran=academicOptions.branches)===null||_academicOptions$bran===void 0?void 0:_academicOptions$bran.map(b=>/*#__PURE__*/_jsx(\"option\",{value:b,children:b},b))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Academic Year\"}),/*#__PURE__*/_jsxs(\"select\",{value:filters.academicYear,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{academicYear:e.target.value})),className:\"input-field\",\"data-testid\":\"filter-year-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Years\"}),academicOptions===null||academicOptions===void 0?void 0:(_academicOptions$acad=academicOptions.academic_years)===null||_academicOptions$acad===void 0?void 0:_academicOptions$acad.map(y=>/*#__PURE__*/_jsx(\"option\",{value:y,children:y},y))]})]})]})]}),showFilters&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 pt-4 border-t border-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:[/*#__PURE__*/_jsx(Clock,{className:\"w-4 h-4 inline mr-1\"}),\"Time Window Start\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:filters.timeWindowStart,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{timeWindowStart:e.target.value})),className:\"input-field\",\"data-testid\":\"time-start-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:[/*#__PURE__*/_jsx(Clock,{className:\"w-4 h-4 inline mr-1\"}),\"Time Window End\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:filters.timeWindowEnd,onChange:e=>setFilters(_objectSpread(_objectSpread({},filters),{},{timeWindowEnd:e.target.value})),className:\"input-field\",\"data-testid\":\"time-end-input\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 mt-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleSearch,className:\"btn-primary flex items-center gap-2\",\"data-testid\":\"search-btn\",children:[/*#__PURE__*/_jsx(Search,{className:\"w-4 h-4\"}),\"Search Rides\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleReset,className:\"btn-secondary\",\"data-testid\":\"reset-search-btn\",children:\"Reset\"})]})]});};// Post Ride Form with Event Tag\nconst PostRideForm=_ref13=>{let{pickupPoints,eventTags,onSubmit,onCancel}=_ref13;const[formData,setFormData]=useState({source:'',destination:'',departureTime:'',totalSeats:3,estimatedCost:'',pickupPoint:'',isRecurring:false,recurrencePattern:'',eventTag:'',distanceKm:''});const[loading,setLoading]=useState(false);const[error,setError]=useState('');const handleSubmit=async e=>{e.preventDefault();setError('');setLoading(true);try{const data=_objectSpread(_objectSpread({},formData),{},{departure_time:new Date(formData.departureTime).toISOString(),total_seats:parseInt(formData.totalSeats),estimated_cost:parseFloat(formData.estimatedCost),pickup_point:formData.pickupPoint||null,is_recurring:formData.isRecurring,recurrence_pattern:formData.isRecurring?formData.recurrencePattern:null,event_tag:formData.eventTag||null,distance_km:formData.distanceKm?parseFloat(formData.distanceKm):null});await onSubmit(data);}catch(err){var _err$response3,_err$response3$data;setError(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.detail)||'Failed to post ride');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",\"data-testid\":\"post-ride-form\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-6 h-6 text-blue-600\"}),\"Post a New Ride\"]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4\",\"data-testid\":\"post-ride-error\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"From *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.source,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{source:e.target.value})),className:\"input-field\",placeholder:\"Starting location\",required:true,\"data-testid\":\"ride-source-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"To *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.destination,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{destination:e.target.value})),className:\"input-field\",placeholder:\"Destination\",required:true,\"data-testid\":\"ride-destination-input\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Departure Time *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:formData.departureTime,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{departureTime:e.target.value})),className:\"input-field\",required:true,\"data-testid\":\"ride-time-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:[/*#__PURE__*/_jsx(Navigation,{className:\"w-4 h-4 inline mr-1\"}),\"Pickup Point\"]}),/*#__PURE__*/_jsxs(\"select\",{value:formData.pickupPoint,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{pickupPoint:e.target.value})),className:\"input-field\",\"data-testid\":\"pickup-point-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select pickup point (optional)\"}),pickupPoints.map(point=>/*#__PURE__*/_jsx(\"option\",{value:point,children:point},point))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Available Seats *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",max:\"8\",value:formData.totalSeats,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{totalSeats:e.target.value})),className:\"input-field\",required:true,\"data-testid\":\"ride-seats-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Estimated Cost ($) *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",step:\"0.01\",value:formData.estimatedCost,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{estimatedCost:e.target.value})),className:\"input-field\",placeholder:\"Total trip cost\",required:true,\"data-testid\":\"ride-cost-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4 inline mr-1\"}),\"Distance (km)\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",step:\"0.1\",value:formData.distanceKm,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{distanceKm:e.target.value})),className:\"input-field\",placeholder:\"Approx distance\",\"data-testid\":\"ride-distance-input\"})]})]}),eventTags&&eventTags.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-indigo-50 rounded-lg border border-indigo-100\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-indigo-800 mb-3\",children:[/*#__PURE__*/_jsx(Tag,{className:\"w-4 h-4 inline mr-1\"}),\"Tag this ride with an event (optional)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setFormData(_objectSpread(_objectSpread({},formData),{},{eventTag:''})),className:\"px-3 py-2 rounded-lg border-2 transition-all \".concat(!formData.eventTag?'border-indigo-600 bg-indigo-100 text-indigo-700':'border-gray-200 hover:border-gray-300'),\"data-testid\":\"event-none-btn\",children:\"No Event\"}),eventTags.map(tag=>/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setFormData(_objectSpread(_objectSpread({},formData),{},{eventTag:tag.id})),className:\"px-3 py-2 rounded-lg border-2 transition-all \".concat(formData.eventTag===tag.id?'border-2':'border-gray-200 hover:border-gray-300'),style:formData.eventTag===tag.id?{backgroundColor:\"\".concat(tag.color,\"20\"),borderColor:tag.color,color:tag.color}:{},\"data-testid\":\"event-select-\".concat(tag.id),children:[tag.icon,\" \",tag.name]},tag.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-purple-50 rounded-lg border border-purple-100\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-3 cursor-pointer mb-3\",\"data-testid\":\"recurring-toggle\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:formData.isRecurring,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{isRecurring:e.target.checked})),className:\"w-5 h-5 rounded text-purple-600 focus:ring-purple-500\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Repeat,{className:\"w-5 h-5 text-purple-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-purple-900\",children:\"Make this a recurring ride\"})]})]}),formData.isRecurring&&/*#__PURE__*/_jsxs(\"div\",{className:\"ml-8\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Recurrence Pattern\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-3\",children:[{value:'weekdays',label:'Weekdays',desc:'(Mon-Fri for 2 weeks)'},{value:'daily',label:'Daily',desc:'(Next 7 days)'},{value:'weekly',label:'Weekly',desc:'(Next 4 weeks)'}].map(pattern=>/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setFormData(_objectSpread(_objectSpread({},formData),{},{recurrencePattern:pattern.value})),className:\"px-4 py-2 rounded-lg border-2 transition-all \".concat(formData.recurrencePattern===pattern.value?'border-purple-600 bg-purple-100 text-purple-700':'border-gray-200 hover:border-purple-300'),\"data-testid\":\"recurrence-\".concat(pattern.value),children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:pattern.label}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500 block\",children:pattern.desc})]},pattern.value))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"btn-primary flex items-center gap-2\",\"data-testid\":\"submit-ride-btn\",children:loading?'Posting...':'Post Ride'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onCancel,className:\"btn-secondary\",\"data-testid\":\"cancel-post-btn\",children:\"Cancel\"})]})]})]});};// Request Card Component\nconst RequestCard=_ref14=>{var _request$ride,_request$ride2,_request$ride3,_request$ride4,_request$ride5,_request$ride6,_request$ride7,_request$ride8;let{request,onAccept,onReject,isDriverView=false,onRate,onConfirmSafe}=_ref14;const[loading,setLoading]=useState(false);const handleAction=async action=>{setLoading(true);try{if(action==='accept'){await onAccept(request.id);}else{await onReject(request.id);}}finally{setLoading(false);}};const showRatingPrompt=request.pendingRating&&((_request$ride=request.ride)===null||_request$ride===void 0?void 0:_request$ride.status)==='completed';const showSafeConfirm=request.status==='accepted'&&((_request$ride2=request.ride)===null||_request$ride2===void 0?void 0:_request$ride2.status)==='completed'&&!request.safelyConfirmed;return/*#__PURE__*/_jsxs(\"div\",{className:\"card \".concat(request.isUrgent?'ring-2 ring-red-500':''),\"data-testid\":\"request-card-\".concat(request.id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[request.isUrgent&&/*#__PURE__*/_jsxs(Badge,{variant:\"urgent\",children:[/*#__PURE__*/_jsx(Zap,{className:\"w-3 h-3 inline mr-1\"}),\"Urgent\"]}),/*#__PURE__*/_jsx(Badge,{variant:request.status,children:request.status}),((_request$ride3=request.ride)===null||_request$ride3===void 0?void 0:_request$ride3.status)==='completed'&&/*#__PURE__*/_jsxs(Badge,{variant:\"completed\",children:[/*#__PURE__*/_jsx(Check,{className:\"w-3 h-3 inline mr-1\"}),\"Completed\"]})]}),isDriverView?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:request.riderName}),(request.riderBranch||request.riderYear)&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[request.riderBranch,request.riderBranch&&request.riderYear?' • ':'',request.riderYear]}),request.riderTrust&&/*#__PURE__*/_jsx(TrustBadge,{trust:request.riderTrust,size:\"sm\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Route:\"}),\" \",(_request$ride4=request.ride)===null||_request$ride4===void 0?void 0:_request$ride4.source,\" \\u2192 \",(_request$ride5=request.ride)===null||_request$ride5===void 0?void 0:_request$ride5.destination]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Driver:\"}),\" \",(_request$ride6=request.ride)===null||_request$ride6===void 0?void 0:_request$ride6.driverName]}),((_request$ride7=request.ride)===null||_request$ride7===void 0?void 0:_request$ride7.pickupPoint)&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Pickup:\"}),\" \",(_request$ride8=request.ride)===null||_request$ride8===void 0?void 0:_request$ride8.pickupPoint]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-2\",children:formatDistanceToNow(parseISO(request.createdAt),{addSuffix:true})})]}),isDriverView&&request.status==='pending'&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAction('accept'),disabled:loading,className:\"p-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors\",\"data-testid\":\"accept-request-btn\",children:/*#__PURE__*/_jsx(Check,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAction('reject'),disabled:loading,className:\"p-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors\",\"data-testid\":\"reject-request-btn\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})]})]}),(showRatingPrompt||showSafeConfirm)&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-gray-100 flex flex-wrap gap-3\",children:[showSafeConfirm&&/*#__PURE__*/_jsx(SafeCompletionButton,{rideId:request.rideId,onConfirm:onConfirmSafe,confirmed:request.safelyConfirmed}),showRatingPrompt&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onRate(request.rideId,request.pendingRating),className:\"flex items-center gap-2 bg-yellow-100 text-yellow-800 px-4 py-2 rounded-lg hover:bg-yellow-200 transition-colors\",\"data-testid\":\"rate-driver-btn\",children:[/*#__PURE__*/_jsx(Star,{className:\"w-5 h-5\"}),\"Rate Driver\"]})]})]});};// Ride History Card Component\nconst HistoryCard=_ref15=>{let{ride}=_ref15;const departureTime=parseISO(ride.departureTime);return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",\"data-testid\":\"history-card-\".concat(ride.id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(Badge,{variant:ride.status,children:ride.status}),/*#__PURE__*/_jsx(Badge,{variant:ride.role==='driver'?'recurring':'recommended',children:ride.role==='driver'?'As Driver':'As Rider'}),ride.safelyConfirmed&&/*#__PURE__*/_jsxs(Badge,{variant:\"trusted\",children:[/*#__PURE__*/_jsx(ShieldCheck,{className:\"w-3 h-3 inline mr-1\"}),\"Safe\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 rounded-full bg-green-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:ride.source})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 rounded-full bg-red-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:ride.destination})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg font-bold text-blue-600\",children:[\"$\",ride.role==='driver'?ride.estimatedCost:ride.costPaid]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:ride.role==='driver'?'total earned':'paid'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Clock,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:format(departureTime,'MMM d, yyyy h:mm a')})]}),ride.distanceKm&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[ride.distanceKm,\" km\"]})]}),ride.role==='driver'&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[ride.ridersCount,\" rider\",ride.ridersCount!==1?'s':'']})]}),ride.role==='rider'&&ride.driverName&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(User,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:ride.driverName})]})]})]});};// User Profile Card Component with Badges\nconst ProfileCard=_ref16=>{let{user,onLogout,onUpdateProfile}=_ref16;const[editing,setEditing]=useState(false);const[academicOptions,setAcademicOptions]=useState({branches:[],academic_years:[]});const[formData,setFormData]=useState({branch:user.branch||'',academicYear:user.academicYear||''});const[saving,setSaving]=useState(false);useEffect(()=>{const fetchOptions=async()=>{try{const response=await api.get('/api/academic-options');setAcademicOptions(response.data);}catch(err){console.error('Failed to fetch academic options:',err);}};fetchOptions();},[]);const handleSave=async()=>{setSaving(true);try{await onUpdateProfile(formData);setEditing(false);}finally{setSaving(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",\"data-testid\":\"profile-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(User,{className:\"w-8 h-8 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:user.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 capitalize\",children:user.role}),(user.branch||user.academicYear)&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[user.branch,user.branch&&user.academicYear?' • ':'',user.academicYear]})]})]}),user.badges&&user.badges.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Trophy,{className:\"w-4 h-4 text-amber-500\"}),\"Your Badges\"]}),/*#__PURE__*/_jsx(UserBadgeDisplay,{badges:user.badges})]}),user.streak&&user.streak.currentStreak>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(StreakDisplay,{streak:user.streak})}),user.avgRating!==undefined&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-1 mb-1\",children:[/*#__PURE__*/_jsx(Star,{className:\"w-5 h-5 text-yellow-500 fill-yellow-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-bold text-gray-900\",children:user.avgRating||'-'})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Rating\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold text-gray-900\",children:user.totalRides||0}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Rides\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold text-gray-900\",children:user.ratingCount||0}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Reviews\"})]})]}),user.trustLabel&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(TrustBadge,{trust:user,showRating:false})}),editing?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 mb-6 p-4 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-900\",children:\"Edit Academic Info\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Branch\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.branch,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{branch:e.target.value})),className:\"input-field\",\"data-testid\":\"edit-branch-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select branch\"}),academicOptions.branches.map(b=>/*#__PURE__*/_jsx(\"option\",{value:b,children:b},b))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Year\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.academicYear,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{academicYear:e.target.value})),className:\"input-field\",\"data-testid\":\"edit-year-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select year\"}),academicOptions.academic_years.map(y=>/*#__PURE__*/_jsx(\"option\",{value:y,children:y},y))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,disabled:saving,className:\"btn-primary\",\"data-testid\":\"save-profile-btn\",children:saving?'Saving...':'Save'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditing(false),className:\"btn-secondary\",\"data-testid\":\"cancel-edit-btn\",children:\"Cancel\"})]})]}):/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setEditing(true),className:\"w-full btn-secondary mb-4 flex items-center justify-center gap-2\",\"data-testid\":\"edit-profile-btn\",children:[/*#__PURE__*/_jsx(GraduationCap,{className:\"w-5 h-5\"}),\"Edit Academic Info\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:onLogout,className:\"w-full btn-secondary flex items-center justify-center gap-2 text-red-600 border-red-200 hover:bg-red-50\",\"data-testid\":\"profile-logout-btn\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-5 h-5\"}),\"Logout\"]})]})});};// Main App Component\nfunction App(){var _auth$user2;const auth=useAuth();const[view,setView]=useState('rides');// rides, myRides, requests, post, history, profile, stats\nconst[rides,setRides]=useState([]);const[myRides,setMyRides]=useState([]);const[myRequests,setMyRequests]=useState([]);const[history,setHistory]=useState([]);const[pickupPoints,setPickupPoints]=useState([]);const[eventTags,setEventTags]=useState([]);const[academicOptions,setAcademicOptions]=useState({branches:[],academic_years:[]});const[loading,setLoading]=useState(false);const[notification,setNotification]=useState(null);// Rating modal state\nconst[ratingModal,setRatingModal]=useState({isOpen:false,rideId:null,userToRate:null});// Fetch pickup points\nconst fetchPickupPoints=useCallback(async()=>{try{const response=await api.get('/api/pickup-points');setPickupPoints(response.data.pickup_points);}catch(err){console.error('Failed to fetch pickup points:',err);}},[]);// Fetch event tags\nconst fetchEventTags=useCallback(async()=>{try{const response=await api.get('/api/event-tags');setEventTags(response.data.event_tags);}catch(err){console.error('Failed to fetch event tags:',err);}},[]);// Fetch academic options\nconst fetchAcademicOptions=useCallback(async()=>{try{const response=await api.get('/api/academic-options');setAcademicOptions(response.data);}catch(err){console.error('Failed to fetch academic options:',err);}},[]);// Fetch all rides\nconst fetchRides=useCallback(async function(){let filters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};setLoading(true);try{const params=new URLSearchParams();if(filters.source)params.append('source',filters.source);if(filters.destination)params.append('destination',filters.destination);if(filters.timeWindowStart)params.append('time_window_start',new Date(filters.timeWindowStart).toISOString());if(filters.timeWindowEnd)params.append('time_window_end',new Date(filters.timeWindowEnd).toISOString());if(filters.eventTag)params.append('event_tag',filters.eventTag);if(filters.branch)params.append('branch',filters.branch);if(filters.academicYear)params.append('academic_year',filters.academicYear);const response=await api.get(\"/api/rides?\".concat(params.toString()));setRides(response.data.rides);}catch(err){showNotification('Failed to fetch rides','error');}finally{setLoading(false);}},[]);// Fetch driver's rides\nconst fetchMyRides=useCallback(async()=>{try{const response=await api.get('/api/rides/driver/my-rides');setMyRides(response.data.rides);}catch(err){console.error('Failed to fetch my rides:',err);}},[]);// Fetch rider's requests\nconst fetchMyRequests=useCallback(async()=>{try{const response=await api.get('/api/requests/my-requests');setMyRequests(response.data.requests);}catch(err){console.error('Failed to fetch my requests:',err);}},[]);// Fetch ride history\nconst fetchHistory=useCallback(async()=>{try{var _auth$user;const endpoint=((_auth$user=auth.user)===null||_auth$user===void 0?void 0:_auth$user.role)==='driver'?'/api/history/driver':'/api/history/rider';const response=await api.get(endpoint);setHistory(response.data.history);}catch(err){console.error('Failed to fetch history:',err);}},[(_auth$user2=auth.user)===null||_auth$user2===void 0?void 0:_auth$user2.role]);// Show notification\nconst showNotification=function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'success';setNotification({message,type});setTimeout(()=>setNotification(null),3000);};// Request a ride\nconst requestRide=async function(rideId){let isUrgent=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;try{await api.post('/api/requests',{ride_id:rideId,is_urgent:isUrgent});showNotification(isUrgent?'Urgent ride request sent!':'Ride request sent!');fetchRides();fetchMyRequests();}catch(err){var _err$response4,_err$response4$data;showNotification(((_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.detail)||'Failed to request ride','error');}};// Post a ride\nconst postRide=async rideData=>{try{const response=await api.post('/api/rides',rideData);const msg=response.data.recurring_rides_created>0?\"Ride posted! \".concat(response.data.recurring_rides_created,\" recurring rides created.\"):'Ride posted successfully!';showNotification(msg);setView('myRides');fetchMyRides();}catch(err){throw err;}};// Accept request\nconst acceptRequest=async requestId=>{try{await api.patch(\"/api/requests/\".concat(requestId,\"/accept\"));showNotification('Request accepted!');fetchMyRides();}catch(err){var _err$response5,_err$response5$data;showNotification(((_err$response5=err.response)===null||_err$response5===void 0?void 0:(_err$response5$data=_err$response5.data)===null||_err$response5$data===void 0?void 0:_err$response5$data.detail)||'Failed to accept request','error');}};// Reject request\nconst rejectRequest=async requestId=>{try{await api.patch(\"/api/requests/\".concat(requestId,\"/reject\"));showNotification('Request rejected');fetchMyRides();}catch(err){var _err$response6,_err$response6$data;showNotification(((_err$response6=err.response)===null||_err$response6===void 0?void 0:(_err$response6$data=_err$response6.data)===null||_err$response6$data===void 0?void 0:_err$response6$data.detail)||'Failed to reject request','error');}};// Submit rating\nconst submitRating=async ratingData=>{try{await api.post('/api/ratings',ratingData);showNotification('Rating submitted successfully!');fetchMyRequests();fetchMyRides();auth.fetchUserInfo();}catch(err){throw err;}};// Confirm safe completion\nconst confirmSafeCompletion=async rideId=>{try{await api.post('/api/safe-completion',{ride_id:rideId});showNotification('Safe arrival confirmed!');fetchMyRequests();}catch(err){var _err$response7,_err$response7$data;showNotification(((_err$response7=err.response)===null||_err$response7===void 0?void 0:(_err$response7$data=_err$response7.data)===null||_err$response7$data===void 0?void 0:_err$response7$data.detail)||'Failed to confirm','error');}};// Update ride status\nconst updateRideStatus=async(rideId,status)=>{try{await api.patch(\"/api/rides/\".concat(rideId,\"/status?status=\").concat(status));showNotification(\"Ride marked as \".concat(status,\"!\"));fetchMyRides();}catch(err){var _err$response8,_err$response8$data;showNotification(((_err$response8=err.response)===null||_err$response8===void 0?void 0:(_err$response8$data=_err$response8.data)===null||_err$response8$data===void 0?void 0:_err$response8$data.detail)||'Failed to update status','error');}};// Update profile\nconst updateProfile=async profileData=>{try{await api.patch('/api/auth/profile',{branch:profileData.branch||null,academic_year:profileData.academicYear||null});showNotification('Profile updated!');auth.fetchUserInfo();}catch(err){var _err$response9,_err$response9$data;showNotification(((_err$response9=err.response)===null||_err$response9===void 0?void 0:(_err$response9$data=_err$response9.data)===null||_err$response9$data===void 0?void 0:_err$response9$data.detail)||'Failed to update profile','error');}};// Open rating modal\nconst openRatingModal=(rideId,userToRate)=>{setRatingModal({isOpen:true,rideId,userToRate});};// Auth handlers\nconst handleLogin=async function(email,password,name,role,branch,academicYear){let isSignup=arguments.length>6&&arguments[6]!==undefined?arguments[6]:false;if(isSignup){await auth.signup(email,password,name,role,branch,academicYear);}else{await auth.login(email,password);}};// Initial data fetch\nuseEffect(()=>{if(auth.user){fetchPickupPoints();fetchEventTags();fetchAcademicOptions();fetchRides();if(auth.user.role==='driver'){fetchMyRides();}else{fetchMyRequests();}}},[auth.user,fetchPickupPoints,fetchEventTags,fetchAcademicOptions,fetchRides,fetchMyRides,fetchMyRequests]);if(auth.loading){return/*#__PURE__*/_jsx(LoadingSpinner,{});}if(!auth.user){return/*#__PURE__*/_jsx(AuthPage,{onLogin:handleLogin});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",\"data-testid\":\"main-app\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-sm sticky top-0 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto px-4 py-4 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center\",children:/*#__PURE__*/_jsx(Car,{className:\"w-5 h-5 text-white\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-gray-900\",children:\"CampusPool\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setView('profile');auth.fetchUserInfo();},className:\"flex items-center gap-2 hover:bg-gray-100 p-2 rounded-lg transition-colors\",\"data-testid\":\"profile-btn\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(User,{className:\"w-4 h-4 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"hidden sm:block text-left\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:auth.user.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 capitalize\",children:auth.user.role})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:auth.logout,className:\"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors\",\"data-testid\":\"logout-btn\",children:/*#__PURE__*/_jsx(LogOut,{className:\"w-5 h-5\"})})]})]})}),notification&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-20 right-4 z-50 px-6 py-3 rounded-lg shadow-lg \".concat(notification.type==='error'?'bg-red-600':'bg-green-600',\" text-white font-medium\"),\"data-testid\":\"notification\",children:notification.message}),/*#__PURE__*/_jsx(RatingModal,{isOpen:ratingModal.isOpen,onClose:()=>setRatingModal({isOpen:false,rideId:null,userToRate:null}),rideId:ratingModal.rideId,userToRate:ratingModal.userToRate,onSubmit:submitRating}),/*#__PURE__*/_jsx(\"nav\",{className:\"bg-white border-b\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-6xl mx-auto px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-1 overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setView('rides');fetchRides();},className:\"px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap \".concat(view==='rides'?'border-blue-600 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700'),\"data-testid\":\"nav-rides\",children:[/*#__PURE__*/_jsx(Search,{className:\"w-4 h-4 inline mr-2\"}),\"Find Rides\"]}),auth.user.role==='driver'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setView('myRides');fetchMyRides();},className:\"px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap \".concat(view==='myRides'?'border-blue-600 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700'),\"data-testid\":\"nav-my-rides\",children:[/*#__PURE__*/_jsx(Car,{className:\"w-4 h-4 inline mr-2\"}),\"My Rides\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setView('post'),className:\"px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap \".concat(view==='post'?'border-blue-600 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700'),\"data-testid\":\"nav-post-ride\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4 inline mr-2\"}),\"Post Ride\"]})]}),auth.user.role==='rider'&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setView('requests');fetchMyRequests();},className:\"px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap \".concat(view==='requests'?'border-blue-600 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700'),\"data-testid\":\"nav-my-requests\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4 inline mr-2\"}),\"My Requests\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setView('stats');},className:\"px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap \".concat(view==='stats'?'border-blue-600 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700'),\"data-testid\":\"nav-stats\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"w-4 h-4 inline mr-2\"}),\"Insights\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setView('history');fetchHistory();},className:\"px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap \".concat(view==='history'?'border-blue-600 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700'),\"data-testid\":\"nav-history\",children:[/*#__PURE__*/_jsx(History,{className:\"w-4 h-4 inline mr-2\"}),\"History\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setView('profile');auth.fetchUserInfo();},className:\"px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap \".concat(view==='profile'?'border-blue-600 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700'),\"data-testid\":\"nav-profile\",children:[/*#__PURE__*/_jsx(User,{className:\"w-4 h-4 inline mr-2\"}),\"Profile\"]})]})})}),/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-6xl mx-auto px-4 py-6\",children:[view==='rides'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(RideSearch,{onSearch:fetchRides,pickupPoints:pickupPoints,eventTags:eventTags,academicOptions:academicOptions}),loading?/*#__PURE__*/_jsx(LoadingSpinner,{}):rides.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"card text-center py-12\",children:[/*#__PURE__*/_jsx(Car,{className:\"w-12 h-12 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No rides found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Try adjusting your search filters or check back later\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[rides.filter(r=>r.isRecommended).length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-2\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-medium text-green-700 mb-3 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Star,{className:\"w-4 h-4\"}),\"Recommended for you\"]})}),rides.map(ride=>/*#__PURE__*/_jsx(RideCard,{ride:ride,onRequest:requestRide,userRole:auth.user.role},ride.id))]})]}),view==='myRides'&&auth.user.role==='driver'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900 mb-6\",children:\"My Posted Rides\"}),myRides.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"card text-center py-12\",children:[/*#__PURE__*/_jsx(Car,{className:\"w-12 h-12 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No rides posted yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-4\",children:\"Start sharing rides with fellow students\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setView('post'),className:\"btn-primary\",\"data-testid\":\"post-first-ride-btn\",children:\"Post Your First Ride\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:myRides.map(ride=>/*#__PURE__*/_jsx(DriverRideCard,{ride:ride,onAccept:acceptRequest,onReject:rejectRequest,onUpdateStatus:updateRideStatus,onRate:openRatingModal},ride.id))})]}),view==='requests'&&auth.user.role==='rider'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900 mb-6\",children:\"My Ride Requests\"}),myRequests.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"card text-center py-12\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-12 h-12 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No requests yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-4\",children:\"Browse available rides and send requests\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setView('rides'),className:\"btn-primary\",\"data-testid\":\"find-rides-btn\",children:\"Find Rides\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:myRequests.map(request=>/*#__PURE__*/_jsx(RequestCard,{request:request,onRate:openRatingModal,onConfirmSafe:confirmSafeCompletion},request.id))})]}),view==='post'&&auth.user.role==='driver'&&/*#__PURE__*/_jsx(PostRideForm,{pickupPoints:pickupPoints,eventTags:eventTags,onSubmit:postRide,onCancel:()=>setView('myRides')}),view==='stats'&&/*#__PURE__*/_jsx(StatisticsDashboard,{user:auth.user}),view==='history'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(History,{className:\"w-6 h-6 text-blue-600\"}),\"Ride History\"]}),history.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"card text-center py-12\",children:[/*#__PURE__*/_jsx(History,{className:\"w-12 h-12 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No ride history yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Your completed and cancelled rides will appear here\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:history.map(ride=>/*#__PURE__*/_jsx(HistoryCard,{ride:ride},ride.id))})]}),view==='profile'&&/*#__PURE__*/_jsx(\"div\",{className:\"max-w-md mx-auto\",children:/*#__PURE__*/_jsx(ProfileCard,{user:auth.user,onLogout:auth.logout,onUpdateProfile:updateProfile})})]})]});}// Driver Ride Card with request management\nconst DriverRideCard=_ref17=>{let{ride,onAccept,onReject,onUpdateStatus,onRate}=_ref17;const[requests,setRequests]=useState([]);const[showRequests,setShowRequests]=useState(false);const[loadingRequests,setLoadingRequests]=useState(false);const fetchRequests=async()=>{setLoadingRequests(true);try{const response=await api.get(\"/api/requests/ride/\".concat(ride.id));setRequests(response.data.requests);}catch(err){console.error('Failed to fetch requests:',err);}finally{setLoadingRequests(false);}};const handleToggleRequests=()=>{if(!showRequests){fetchRequests();}setShowRequests(!showRequests);};const departureTime=parseISO(ride.departureTime);const urgentCount=requests.filter(r=>r.isUrgent&&r.status==='pending').length;const hasPendingRatings=ride.pendingRatings&&ride.pendingRatings.length>0;return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",\"data-testid\":\"driver-ride-card-\".concat(ride.id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 mb-3\",children:[ride.eventTag&&/*#__PURE__*/_jsx(EventTagBadge,{eventTag:ride.eventTag}),ride.isRecurring&&/*#__PURE__*/_jsxs(Badge,{variant:\"recurring\",children:[/*#__PURE__*/_jsx(Repeat,{className:\"w-3 h-3 inline mr-1\"}),ride.recurrencePattern||'Recurring']}),/*#__PURE__*/_jsx(Badge,{variant:ride.status,children:ride.status})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 rounded-full bg-green-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:ride.source})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 rounded-full bg-red-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:ride.destination})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg font-bold text-blue-600\",children:[\"$\",ride.estimatedCost]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"total cost\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3 mb-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-gray-600\",children:[/*#__PURE__*/_jsx(Clock,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:format(departureTime,'MMM d, h:mm a')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-gray-600\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[ride.availableSeats,\" of \",ride.totalSeats,\" seats available\"]})]}),ride.pickupPoint&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-gray-600 col-span-2\",children:[/*#__PURE__*/_jsx(Navigation,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Pickup: \",ride.pickupPoint]})]}),ride.distanceKm&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-gray-600\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[ride.distanceKm,\" km\"]})]})]}),ride.status==='posted'&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onUpdateStatus(ride.id,'in_progress'),className:\"btn-primary text-sm\",\"data-testid\":\"start-ride-btn\",children:\"Start Ride\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onUpdateStatus(ride.id,'cancelled'),className:\"btn-secondary text-sm\",\"data-testid\":\"cancel-ride-btn\",children:\"Cancel\"})]}),ride.status==='in_progress'&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onUpdateStatus(ride.id,'completed'),className:\"btn-primary text-sm bg-green-600 hover:bg-green-700\",\"data-testid\":\"complete-ride-btn\",children:[/*#__PURE__*/_jsx(Check,{className:\"w-4 h-4 inline mr-1\"}),\"Mark as Completed\"]})}),hasPendingRatings&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 bg-yellow-50 rounded-lg border border-yellow-100\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-yellow-800 mb-2 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Star,{className:\"w-4 h-4\"}),\"Rate your riders\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:ride.pendingRatings.map(rider=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onRate(ride.id,rider),className:\"text-sm bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full hover:bg-yellow-200 transition-colors\",\"data-testid\":\"rate-rider-\".concat(rider.userId),children:[\"Rate \",rider.userName]},rider.userId))})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleToggleRequests,className:\"w-full flex items-center justify-between px-4 py-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\",\"data-testid\":\"toggle-requests-btn\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-5 h-5 text-gray-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Ride Requests\"}),urgentCount>0&&/*#__PURE__*/_jsxs(Badge,{variant:\"urgent\",children:[urgentCount,\" urgent\"]})]}),/*#__PURE__*/_jsx(ChevronRight,{className:\"w-5 h-5 text-gray-400 transition-transform \".concat(showRequests?'rotate-90':'')})]}),showRequests&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 space-y-3\",children:loadingRequests?/*#__PURE__*/_jsx(LoadingSpinner,{}):requests.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-4\",children:\"No requests yet\"}):requests.map(request=>/*#__PURE__*/_jsx(RequestCard,{request:request,isDriverView:true,onAccept:onAccept,onReject:onReject},request.id))})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","format","formatDistanceToNow","parseISO","Car","MapPin","Clock","Users","DollarSign","Search","Plus","LogOut","User","Check","X","AlertTriangle","Repeat","Zap","Navigation","ChevronRight","Filter","Star","Calendar","Shield","ShieldCheck","ShieldAlert","History","ThumbsUp","MessageSquare","Award","Leaf","TrendingUp","Target","Flame","Trophy","BookOpen","GraduationCap","Tag","BarChart3","ChevronDown","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_URL","process","env","REACT_APP_BACKEND_URL","api","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","concat","useAuth","user","setUser","loading","setLoading","fetchUserInfo","response","get","data","setItem","JSON","stringify","err","console","error","userData","parse","login","email","password","post","access_token","signup","name","role","branch","academicYear","academic_year","logout","removeItem","Badge","_ref","variant","children","className","variants","urgent","recommended","recurring","pending","accepted","rejected","completed","cancelled","trusted","new_user","low_rating","regular","event","eco","streak","default","LoadingSpinner","EventTagBadge","_ref2","eventTag","style","backgroundColor","color","borderColor","id","icon","TrustBadge","_ref3","trust","showRating","size","trustLabel","avgRating","totalRides","ratingCount","labelConfig","text","Icon","sizeClasses","StarRatingInput","_ref4","rating","setRating","hover","setHover","sizeClass","map","star","type","onClick","onMouseEnter","onMouseLeave","RatingModal","_ref5","isOpen","onClose","rideId","userToRate","onSubmit","feedback","setFeedback","setError","handleSubmit","ride_id","rated_user_id","userId","trim","_err$response","_err$response$data","detail","userName","value","onChange","e","target","placeholder","maxLength","disabled","SafeCompletionButton","_ref6","onConfirm","confirmed","handleConfirm","UserBadgeDisplay","_ref7","badges","compact","length","displayBadges","slice","badge","title","description","StreakDisplay","_ref8","currentStreak","longestStreak","EcoImpactCard","_ref9","_stats$moneySaved","stats","co2Saved","co2SavedKg","treesEquivalent","toFixed","totalDistanceKm","moneySaved","WeeklySummaryCard","_ref0","_summary$co2SavedKg","_summary$moneySaved","_summary$distanceKm","summary","ridesOffered","ridesTaken","distanceKm","StatisticsDashboard","_ref1","statistics","setStatistics","fetchStats","weeklySummary","AuthPage","_ref10","onLogin","isLogin","setIsLogin","formData","setFormData","academicOptions","setAcademicOptions","branches","academic_years","fetchOptions","preventDefault","_err$response2","_err$response2$data","_objectSpread","required","minLength","b","y","RideCard","_ref11","ride","onRequest","userRole","showRequestBtn","isUrgent","setIsUrgent","requesting","setRequesting","departureTime","hoursUntilDeparture","Date","canBeUrgent","handleRequest","isRecommended","isRecurring","recurrencePattern","source","destination","costPerRider","availableSeats","totalSeats","pickupPoint","driverName","driverBranch","driverYear","driverTrust","checked","RideSearch","_ref12","_academicOptions$bran","_academicOptions$acad","onSearch","pickupPoints","eventTags","filters","setFilters","timeWindowStart","timeWindowEnd","showFilters","setShowFilters","showCommunity","setShowCommunity","handleSearch","handleReset","tag","PostRideForm","_ref13","onCancel","estimatedCost","departure_time","toISOString","total_seats","parseInt","estimated_cost","parseFloat","pickup_point","is_recurring","recurrence_pattern","event_tag","distance_km","_err$response3","_err$response3$data","point","min","max","step","label","desc","pattern","RequestCard","_ref14","_request$ride","_request$ride2","_request$ride3","_request$ride4","_request$ride5","_request$ride6","_request$ride7","_request$ride8","onAccept","onReject","isDriverView","onRate","onConfirmSafe","handleAction","action","showRatingPrompt","pendingRating","status","showSafeConfirm","safelyConfirmed","riderName","riderBranch","riderYear","riderTrust","createdAt","addSuffix","HistoryCard","_ref15","costPaid","ridersCount","ProfileCard","_ref16","onLogout","onUpdateProfile","editing","setEditing","saving","setSaving","handleSave","undefined","App","_auth$user2","auth","view","setView","rides","setRides","myRides","setMyRides","myRequests","setMyRequests","history","setHistory","setPickupPoints","setEventTags","notification","setNotification","ratingModal","setRatingModal","fetchPickupPoints","pickup_points","fetchEventTags","event_tags","fetchAcademicOptions","fetchRides","arguments","params","URLSearchParams","append","toString","showNotification","fetchMyRides","fetchMyRequests","requests","fetchHistory","_auth$user","endpoint","message","setTimeout","requestRide","is_urgent","_err$response4","_err$response4$data","postRide","rideData","msg","recurring_rides_created","acceptRequest","requestId","patch","_err$response5","_err$response5$data","rejectRequest","_err$response6","_err$response6$data","submitRating","ratingData","confirmSafeCompletion","_err$response7","_err$response7$data","updateRideStatus","_err$response8","_err$response8$data","updateProfile","profileData","_err$response9","_err$response9$data","openRatingModal","handleLogin","isSignup","filter","r","DriverRideCard","onUpdateStatus","_ref17","setRequests","showRequests","setShowRequests","loadingRequests","setLoadingRequests","fetchRequests","handleToggleRequests","urgentCount","hasPendingRatings","pendingRatings","rider"],"sources":["/app/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport { format, formatDistanceToNow, parseISO } from 'date-fns';\nimport {\n  Car, MapPin, Clock, Users, DollarSign, Search, Plus, LogOut,\n  User, Check, X, AlertTriangle, Repeat, Zap, Navigation, ChevronRight,\n  Filter, Star, Calendar, Shield, ShieldCheck, ShieldAlert, History,\n  ThumbsUp, MessageSquare, Award, Leaf, TrendingUp, Target, Flame,\n  Trophy, BookOpen, GraduationCap, Tag, BarChart3, ChevronDown\n} from 'lucide-react';\nimport './App.css';\n\nconst API_URL = process.env.REACT_APP_BACKEND_URL || 'http://localhost:8001';\n\n// API instance with auth header\nconst api = axios.create({\n  baseURL: API_URL,\n});\n\napi.interceptors.request.use((config) => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Auth Context\nconst useAuth = () => {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const fetchUserInfo = async () => {\n    try {\n      const response = await api.get('/api/auth/me');\n      setUser(response.data);\n      localStorage.setItem('user', JSON.stringify(response.data));\n    } catch (err) {\n      console.error('Failed to fetch user info:', err);\n    }\n  };\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const userData = localStorage.getItem('user');\n    if (token && userData) {\n      setUser(JSON.parse(userData));\n      fetchUserInfo();\n    }\n    setLoading(false);\n  }, []);\n\n  const login = async (email, password) => {\n    const response = await api.post('/api/auth/login', { email, password });\n    localStorage.setItem('token', response.data.access_token);\n    localStorage.setItem('user', JSON.stringify(response.data.user));\n    setUser(response.data.user);\n    return response.data;\n  };\n\n  const signup = async (email, password, name, role, branch, academicYear) => {\n    const response = await api.post('/api/auth/signup', { \n      email, password, name, role,\n      branch: branch || null,\n      academic_year: academicYear || null\n    });\n    localStorage.setItem('token', response.data.access_token);\n    localStorage.setItem('user', JSON.stringify(response.data.user));\n    setUser(response.data.user);\n    return response.data;\n  };\n\n  const logout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    setUser(null);\n  };\n\n  return { user, loading, login, signup, logout, fetchUserInfo };\n};\n\n// Components\nconst Badge = ({ variant, children, className = '' }) => {\n  const variants = {\n    urgent: 'bg-red-100 text-red-800 border-red-200',\n    recommended: 'bg-green-100 text-green-800 border-green-200',\n    recurring: 'bg-purple-100 text-purple-800 border-purple-200',\n    pending: 'bg-yellow-100 text-yellow-800 border-yellow-200',\n    accepted: 'bg-green-100 text-green-800 border-green-200',\n    rejected: 'bg-red-100 text-red-800 border-red-200',\n    completed: 'bg-blue-100 text-blue-800 border-blue-200',\n    cancelled: 'bg-gray-100 text-gray-800 border-gray-200',\n    trusted: 'bg-emerald-100 text-emerald-800 border-emerald-200',\n    new_user: 'bg-sky-100 text-sky-800 border-sky-200',\n    low_rating: 'bg-orange-100 text-orange-800 border-orange-200',\n    regular: 'bg-slate-100 text-slate-700 border-slate-200',\n    event: 'bg-indigo-100 text-indigo-800 border-indigo-200',\n    eco: 'bg-green-100 text-green-800 border-green-200',\n    streak: 'bg-orange-100 text-orange-800 border-orange-200',\n    default: 'bg-gray-100 text-gray-800 border-gray-200'\n  };\n\n  return (\n    <span className={`px-2 py-1 text-xs font-medium rounded-full border ${variants[variant] || variants.default} ${className}`} data-testid={`badge-${variant}`}>\n      {children}\n    </span>\n  );\n};\n\nconst LoadingSpinner = () => (\n  <div className=\"flex justify-center items-center p-8\" data-testid=\"loading-spinner\">\n    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n  </div>\n);\n\n// Event Tag Badge Component\nconst EventTagBadge = ({ eventTag }) => {\n  if (!eventTag) return null;\n  \n  return (\n    <span \n      className=\"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full border\"\n      style={{ \n        backgroundColor: `${eventTag.color}20`,\n        borderColor: eventTag.color,\n        color: eventTag.color\n      }}\n      data-testid={`event-tag-${eventTag.id}`}\n    >\n      <span>{eventTag.icon}</span>\n      {eventTag.name}\n    </span>\n  );\n};\n\n// Trust Badge Component\nconst TrustBadge = ({ trust, showRating = true, size = 'md' }) => {\n  if (!trust) return null;\n  \n  const { trustLabel, avgRating, totalRides, ratingCount } = trust;\n  \n  const labelConfig = {\n    trusted: { icon: ShieldCheck, text: 'Trusted', color: 'text-emerald-600' },\n    new_user: { icon: Shield, text: 'New User', color: 'text-sky-600' },\n    low_rating: { icon: ShieldAlert, text: 'Low Rating', color: 'text-orange-600' },\n    regular: { icon: Shield, text: 'Regular', color: 'text-slate-600' }\n  };\n\n  const config = labelConfig[trustLabel] || labelConfig.regular;\n  const Icon = config.icon;\n  \n  const sizeClasses = size === 'sm' ? 'text-xs' : 'text-sm';\n\n  return (\n    <div className={`flex items-center gap-2 ${sizeClasses}`} data-testid=\"trust-badge\">\n      <Badge variant={trustLabel}>\n        <Icon className=\"w-3 h-3 inline mr-1\" />\n        {config.text}\n      </Badge>\n      {showRating && ratingCount > 0 && (\n        <span className=\"flex items-center gap-1 text-gray-600\">\n          <Star className=\"w-3 h-3 text-yellow-500 fill-yellow-500\" />\n          {avgRating} ({ratingCount})\n        </span>\n      )}\n      {totalRides > 0 && (\n        <span className=\"text-gray-500\">\n          {totalRides} ride{totalRides !== 1 ? 's' : ''}\n        </span>\n      )}\n    </div>\n  );\n};\n\n// Star Rating Input Component\nconst StarRatingInput = ({ rating, setRating, size = 'lg' }) => {\n  const [hover, setHover] = useState(0);\n  const sizeClass = size === 'lg' ? 'w-8 h-8' : 'w-5 h-5';\n  \n  return (\n    <div className=\"flex gap-1\" data-testid=\"star-rating-input\">\n      {[1, 2, 3, 4, 5].map((star) => (\n        <button\n          key={star}\n          type=\"button\"\n          onClick={() => setRating(star)}\n          onMouseEnter={() => setHover(star)}\n          onMouseLeave={() => setHover(0)}\n          className=\"focus:outline-none transition-transform hover:scale-110\"\n          data-testid={`star-${star}`}\n        >\n          <Star\n            className={`${sizeClass} ${\n              star <= (hover || rating)\n                ? 'text-yellow-400 fill-yellow-400'\n                : 'text-gray-300'\n            }`}\n          />\n        </button>\n      ))}\n    </div>\n  );\n};\n\n// Rating Modal Component\nconst RatingModal = ({ isOpen, onClose, rideId, userToRate, onSubmit }) => {\n  const [rating, setRating] = useState(0);\n  const [feedback, setFeedback] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const handleSubmit = async () => {\n    if (rating === 0) {\n      setError('Please select a rating');\n      return;\n    }\n    \n    setLoading(true);\n    setError('');\n    \n    try {\n      await onSubmit({\n        ride_id: rideId,\n        rated_user_id: userToRate.userId,\n        rating,\n        feedback: feedback.trim() || null\n      });\n      setRating(0);\n      setFeedback('');\n      onClose();\n    } catch (err) {\n      setError(err.response?.data?.detail || 'Failed to submit rating');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\" data-testid=\"rating-modal\">\n      <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-md p-6\">\n        <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Rate Your Experience</h3>\n        <p className=\"text-gray-600 mb-6\">How was your ride with {userToRate?.userName}?</p>\n        \n        {error && (\n          <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4\" data-testid=\"rating-error\">\n            {error}\n          </div>\n        )}\n        \n        <div className=\"flex justify-center mb-6\">\n          <StarRatingInput rating={rating} setRating={setRating} />\n        </div>\n        \n        <div className=\"mb-6\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            <MessageSquare className=\"w-4 h-4 inline mr-1\" />\n            Feedback (optional)\n          </label>\n          <textarea\n            value={feedback}\n            onChange={(e) => setFeedback(e.target.value)}\n            className=\"input-field h-24 resize-none\"\n            placeholder=\"Share your experience...\"\n            maxLength={500}\n            data-testid=\"rating-feedback-input\"\n          />\n        </div>\n        \n        <div className=\"flex gap-3\">\n          <button\n            onClick={handleSubmit}\n            disabled={loading || rating === 0}\n            className=\"flex-1 btn-primary py-3 disabled:opacity-50\"\n            data-testid=\"submit-rating-btn\"\n          >\n            {loading ? 'Submitting...' : 'Submit Rating'}\n          </button>\n          <button\n            onClick={onClose}\n            className=\"btn-secondary py-3\"\n            data-testid=\"cancel-rating-btn\"\n          >\n            Later\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Safe Completion Button Component\nconst SafeCompletionButton = ({ rideId, onConfirm, confirmed }) => {\n  const [loading, setLoading] = useState(false);\n\n  const handleConfirm = async () => {\n    setLoading(true);\n    try {\n      await onConfirm(rideId);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (confirmed) {\n    return (\n      <div className=\"flex items-center gap-2 text-green-600 bg-green-50 px-3 py-2 rounded-lg\" data-testid=\"safe-confirmed\">\n        <ShieldCheck className=\"w-5 h-5\" />\n        <span className=\"font-medium\">Reached Safely</span>\n      </div>\n    );\n  }\n\n  return (\n    <button\n      onClick={handleConfirm}\n      disabled={loading}\n      className=\"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50\"\n      data-testid=\"confirm-safe-btn\"\n    >\n      <ThumbsUp className=\"w-5 h-5\" />\n      {loading ? 'Confirming...' : 'Reached Safely'}\n    </button>\n  );\n};\n\n// User Badge Display Component\nconst UserBadgeDisplay = ({ badges, compact = false }) => {\n  if (!badges || badges.length === 0) return null;\n  \n  const displayBadges = compact ? badges.slice(0, 3) : badges;\n  \n  return (\n    <div className=\"flex flex-wrap gap-2\" data-testid=\"user-badges\">\n      {displayBadges.map((badge) => (\n        <div \n          key={badge.id}\n          className=\"flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200 rounded-full text-xs\"\n          title={badge.description}\n        >\n          <span>{badge.icon}</span>\n          {!compact && <span className=\"font-medium text-amber-800\">{badge.name}</span>}\n        </div>\n      ))}\n      {compact && badges.length > 3 && (\n        <span className=\"text-xs text-gray-500\">+{badges.length - 3} more</span>\n      )}\n    </div>\n  );\n};\n\n// Streak Display Component\nconst StreakDisplay = ({ streak }) => {\n  if (!streak || streak.currentStreak === 0) return null;\n  \n  return (\n    <div className=\"flex items-center gap-2 px-3 py-2 bg-orange-50 border border-orange-200 rounded-lg\" data-testid=\"streak-display\">\n      <Flame className=\"w-5 h-5 text-orange-500\" />\n      <div>\n        <span className=\"font-bold text-orange-700\">{streak.currentStreak}</span>\n        <span className=\"text-orange-600 text-sm ml-1\">day streak</span>\n      </div>\n      {streak.longestStreak > streak.currentStreak && (\n        <span className=\"text-xs text-orange-500 ml-2\">Best: {streak.longestStreak}</span>\n      )}\n    </div>\n  );\n};\n\n// Eco Impact Card Component\nconst EcoImpactCard = ({ stats }) => {\n  if (!stats) return null;\n  \n  const co2Saved = stats.co2SavedKg || 0;\n  const treesEquivalent = (co2Saved / 21).toFixed(1);\n  \n  return (\n    <div className=\"card bg-gradient-to-br from-green-50 to-emerald-50 border-green-200\" data-testid=\"eco-impact-card\">\n      <div className=\"flex items-center gap-3 mb-4\">\n        <div className=\"w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center\">\n          <Leaf className=\"w-6 h-6 text-white\" />\n        </div>\n        <div>\n          <h3 className=\"font-bold text-green-800\">Your Eco Impact</h3>\n          <p className=\"text-sm text-green-600\">Making the planet greener</p>\n        </div>\n      </div>\n      \n      <div className=\"grid grid-cols-2 gap-4\">\n        <div className=\"text-center p-3 bg-white bg-opacity-60 rounded-lg\">\n          <div className=\"text-2xl font-bold text-green-700\">{co2Saved.toFixed(1)}</div>\n          <div className=\"text-xs text-green-600\">kg CO₂ Saved</div>\n        </div>\n        <div className=\"text-center p-3 bg-white bg-opacity-60 rounded-lg\">\n          <div className=\"text-2xl font-bold text-green-700\">{treesEquivalent}</div>\n          <div className=\"text-xs text-green-600\">🌳 Trees Equivalent</div>\n        </div>\n        <div className=\"text-center p-3 bg-white bg-opacity-60 rounded-lg\">\n          <div className=\"text-2xl font-bold text-green-700\">{stats.totalDistanceKm || 0}</div>\n          <div className=\"text-xs text-green-600\">km Shared</div>\n        </div>\n        <div className=\"text-center p-3 bg-white bg-opacity-60 rounded-lg\">\n          <div className=\"text-2xl font-bold text-green-700\">${stats.moneySaved?.toFixed(0) || 0}</div>\n          <div className=\"text-xs text-green-600\">Money Saved</div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Weekly Summary Card Component\nconst WeeklySummaryCard = ({ summary }) => {\n  if (!summary) return null;\n  \n  return (\n    <div className=\"card bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200\" data-testid=\"weekly-summary-card\">\n      <div className=\"flex items-center gap-3 mb-4\">\n        <div className=\"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center\">\n          <BarChart3 className=\"w-6 h-6 text-white\" />\n        </div>\n        <div>\n          <h3 className=\"font-bold text-blue-800\">This Week</h3>\n          <p className=\"text-sm text-blue-600\">Your 7-day activity</p>\n        </div>\n      </div>\n      \n      <div className=\"grid grid-cols-3 gap-3\">\n        <div className=\"text-center p-3 bg-white bg-opacity-60 rounded-lg\">\n          <div className=\"text-xl font-bold text-blue-700\">{summary.totalRides}</div>\n          <div className=\"text-xs text-blue-600\">Rides</div>\n        </div>\n        <div className=\"text-center p-3 bg-white bg-opacity-60 rounded-lg\">\n          <div className=\"text-xl font-bold text-green-700\">{summary.co2SavedKg?.toFixed(1)}</div>\n          <div className=\"text-xs text-green-600\">kg CO₂</div>\n        </div>\n        <div className=\"text-center p-3 bg-white bg-opacity-60 rounded-lg\">\n          <div className=\"text-xl font-bold text-amber-700\">${summary.moneySaved?.toFixed(0)}</div>\n          <div className=\"text-xs text-amber-600\">Saved</div>\n        </div>\n      </div>\n      \n      <div className=\"mt-4 pt-4 border-t border-blue-200 flex justify-between text-sm\">\n        <span className=\"text-blue-600\">Offered: {summary.ridesOffered}</span>\n        <span className=\"text-blue-600\">Taken: {summary.ridesTaken}</span>\n        <span className=\"text-blue-600\">{summary.distanceKm?.toFixed(0)} km</span>\n      </div>\n    </div>\n  );\n};\n\n// Statistics Dashboard Component\nconst StatisticsDashboard = ({ user }) => {\n  const [statistics, setStatistics] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchStats = async () => {\n      try {\n        const response = await api.get('/api/users/me/statistics');\n        setStatistics(response.data);\n      } catch (err) {\n        console.error('Failed to fetch statistics:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchStats();\n  }, []);\n\n  if (loading) return <LoadingSpinner />;\n  if (!statistics) return null;\n\n  const { statistics: stats, streak, weeklySummary, badges } = statistics;\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"statistics-dashboard\">\n      {/* Header Stats */}\n      <div className=\"card\">\n        <h2 className=\"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2\">\n          <TrendingUp className=\"w-6 h-6 text-blue-600\" />\n          Your Statistics\n        </h2>\n        \n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n          <div className=\"text-center p-4 bg-blue-50 rounded-xl\">\n            <Car className=\"w-6 h-6 text-blue-600 mx-auto mb-2\" />\n            <div className=\"text-2xl font-bold text-gray-900\">{stats.totalRides}</div>\n            <div className=\"text-sm text-gray-600\">Total Rides</div>\n          </div>\n          <div className=\"text-center p-4 bg-purple-50 rounded-xl\">\n            <Users className=\"w-6 h-6 text-purple-600 mx-auto mb-2\" />\n            <div className=\"text-2xl font-bold text-gray-900\">{stats.ridesTaken}</div>\n            <div className=\"text-sm text-gray-600\">Rides Taken</div>\n          </div>\n          <div className=\"text-center p-4 bg-green-50 rounded-xl\">\n            <Car className=\"w-6 h-6 text-green-600 mx-auto mb-2\" />\n            <div className=\"text-2xl font-bold text-gray-900\">{stats.ridesOffered}</div>\n            <div className=\"text-sm text-gray-600\">Rides Offered</div>\n          </div>\n          <div className=\"text-center p-4 bg-amber-50 rounded-xl\">\n            <Navigation className=\"w-6 h-6 text-amber-600 mx-auto mb-2\" />\n            <div className=\"text-2xl font-bold text-gray-900\">{stats.totalDistanceKm}</div>\n            <div className=\"text-sm text-gray-600\">km Traveled</div>\n          </div>\n        </div>\n\n        {/* Streak */}\n        {streak && streak.currentStreak > 0 && (\n          <div className=\"mt-4\">\n            <StreakDisplay streak={streak} />\n          </div>\n        )}\n      </div>\n\n      {/* Badges Section */}\n      {badges && badges.length > 0 && (\n        <div className=\"card\">\n          <h3 className=\"font-bold text-gray-900 mb-4 flex items-center gap-2\">\n            <Trophy className=\"w-5 h-5 text-amber-500\" />\n            Your Badges\n          </h3>\n          <UserBadgeDisplay badges={badges} />\n        </div>\n      )}\n\n      {/* Eco Impact & Weekly Summary */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <EcoImpactCard stats={stats} />\n        <WeeklySummaryCard summary={weeklySummary} />\n      </div>\n    </div>\n  );\n};\n\n// Auth Page\nconst AuthPage = ({ onLogin }) => {\n  const [isLogin, setIsLogin] = useState(true);\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n    name: '',\n    role: 'rider',\n    branch: '',\n    academicYear: ''\n  });\n  const [academicOptions, setAcademicOptions] = useState({ branches: [], academic_years: [] });\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    const fetchOptions = async () => {\n      try {\n        const response = await api.get('/api/academic-options');\n        setAcademicOptions(response.data);\n      } catch (err) {\n        console.error('Failed to fetch academic options:', err);\n      }\n    };\n    fetchOptions();\n  }, []);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n    \n    try {\n      if (isLogin) {\n        await onLogin(formData.email, formData.password);\n      } else {\n        await onLogin(\n          formData.email, \n          formData.password, \n          formData.name, \n          formData.role, \n          formData.branch,\n          formData.academicYear,\n          true\n        );\n      }\n    } catch (err) {\n      setError(err.response?.data?.detail || 'An error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-600 to-purple-700 flex items-center justify-center p-4\">\n      <div className=\"bg-white rounded-2xl shadow-xl w-full max-w-md p-8\" data-testid=\"auth-page\">\n        <div className=\"text-center mb-8\">\n          <div className=\"w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4\">\n            <Car className=\"w-8 h-8 text-white\" />\n          </div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">CampusPool</h1>\n          <p className=\"text-gray-600 mt-1\">Ride sharing for college students</p>\n        </div>\n\n        <div className=\"flex mb-6\">\n          <button\n            onClick={() => setIsLogin(true)}\n            className={`flex-1 py-2 text-center font-medium transition-colors ${\n              isLogin ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-500'\n            }`}\n            data-testid=\"login-tab\"\n          >\n            Login\n          </button>\n          <button\n            onClick={() => setIsLogin(false)}\n            className={`flex-1 py-2 text-center font-medium transition-colors ${\n              !isLogin ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-500'\n            }`}\n            data-testid=\"signup-tab\"\n          >\n            Sign Up\n          </button>\n        </div>\n\n        {error && (\n          <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4\" data-testid=\"auth-error\">\n            {error}\n          </div>\n        )}\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          {!isLogin && (\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Full Name</label>\n              <input\n                type=\"text\"\n                value={formData.name}\n                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                className=\"input-field\"\n                placeholder=\"John Doe\"\n                required={!isLogin}\n                data-testid=\"name-input\"\n              />\n            </div>\n          )}\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Email</label>\n            <input\n              type=\"email\"\n              value={formData.email}\n              onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n              className=\"input-field\"\n              placeholder=\"you@college.edu\"\n              required\n              data-testid=\"email-input\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Password</label>\n            <input\n              type=\"password\"\n              value={formData.password}\n              onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n              className=\"input-field\"\n              placeholder=\"••••••••\"\n              required\n              minLength={6}\n              data-testid=\"password-input\"\n            />\n          </div>\n\n          {!isLogin && (\n            <>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">I want to</label>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setFormData({ ...formData, role: 'rider' })}\n                    className={`p-4 rounded-xl border-2 transition-all ${\n                      formData.role === 'rider'\n                        ? 'border-blue-600 bg-blue-50'\n                        : 'border-gray-200 hover:border-gray-300'\n                    }`}\n                    data-testid=\"rider-role-btn\"\n                  >\n                    <Users className=\"w-6 h-6 mx-auto mb-2 text-blue-600\" />\n                    <span className=\"font-medium\">Find Rides</span>\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={() => setFormData({ ...formData, role: 'driver' })}\n                    className={`p-4 rounded-xl border-2 transition-all ${\n                      formData.role === 'driver'\n                        ? 'border-blue-600 bg-blue-50'\n                        : 'border-gray-200 hover:border-gray-300'\n                    }`}\n                    data-testid=\"driver-role-btn\"\n                  >\n                    <Car className=\"w-6 h-6 mx-auto mb-2 text-blue-600\" />\n                    <span className=\"font-medium\">Offer Rides</span>\n                  </button>\n                </div>\n              </div>\n\n              {/* Academic Info */}\n              <div className=\"grid grid-cols-2 gap-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    <GraduationCap className=\"w-4 h-4 inline mr-1\" />\n                    Branch\n                  </label>\n                  <select\n                    value={formData.branch}\n                    onChange={(e) => setFormData({ ...formData, branch: e.target.value })}\n                    className=\"input-field\"\n                    data-testid=\"branch-select\"\n                  >\n                    <option value=\"\">Select branch</option>\n                    {academicOptions.branches.map((b) => (\n                      <option key={b} value={b}>{b}</option>\n                    ))}\n                  </select>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    <BookOpen className=\"w-4 h-4 inline mr-1\" />\n                    Year\n                  </label>\n                  <select\n                    value={formData.academicYear}\n                    onChange={(e) => setFormData({ ...formData, academicYear: e.target.value })}\n                    className=\"input-field\"\n                    data-testid=\"year-select\"\n                  >\n                    <option value=\"\">Select year</option>\n                    {academicOptions.academic_years.map((y) => (\n                      <option key={y} value={y}>{y}</option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n            </>\n          )}\n\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full btn-primary py-3 text-lg disabled:opacity-50\"\n            data-testid=\"auth-submit-btn\"\n          >\n            {loading ? 'Please wait...' : (isLogin ? 'Login' : 'Create Account')}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\n// Ride Card Component\nconst RideCard = ({ ride, onRequest, userRole, showRequestBtn = true }) => {\n  const [isUrgent, setIsUrgent] = useState(false);\n  const [requesting, setRequesting] = useState(false);\n  \n  const departureTime = parseISO(ride.departureTime);\n  const hoursUntilDeparture = (departureTime - new Date()) / (1000 * 60 * 60);\n  const canBeUrgent = hoursUntilDeparture <= 2 && hoursUntilDeparture > 0;\n\n  const handleRequest = async () => {\n    setRequesting(true);\n    try {\n      await onRequest(ride.id, isUrgent);\n    } finally {\n      setRequesting(false);\n    }\n  };\n\n  return (\n    <div className={`card hover:shadow-md transition-shadow ${ride.isRecommended ? 'ring-2 ring-green-500' : ''}`} data-testid={`ride-card-${ride.id}`}>\n      <div className=\"flex flex-wrap gap-2 mb-3\">\n        {ride.eventTag && <EventTagBadge eventTag={ride.eventTag} />}\n        {ride.isRecommended && (\n          <Badge variant=\"recommended\">\n            <Star className=\"w-3 h-3 inline mr-1\" />\n            Recommended\n          </Badge>\n        )}\n        {ride.isRecurring && (\n          <Badge variant=\"recurring\">\n            <Repeat className=\"w-3 h-3 inline mr-1\" />\n            {ride.recurrencePattern || 'Recurring'}\n          </Badge>\n        )}\n      </div>\n\n      <div className=\"flex items-start justify-between mb-4\">\n        <div className=\"flex-1\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <div className=\"w-2 h-2 rounded-full bg-green-500\"></div>\n            <span className=\"font-medium text-gray-900\">{ride.source}</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-2 h-2 rounded-full bg-red-500\"></div>\n            <span className=\"font-medium text-gray-900\">{ride.destination}</span>\n          </div>\n        </div>\n        <div className=\"text-right\">\n          <div className=\"text-lg font-bold text-blue-600\">${ride.costPerRider}</div>\n          <div className=\"text-xs text-gray-500\">per seat</div>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-2 gap-3 mb-4 text-sm\">\n        <div className=\"flex items-center gap-2 text-gray-600\">\n          <Clock className=\"w-4 h-4\" />\n          <span>{format(departureTime, 'MMM d, h:mm a')}</span>\n        </div>\n        <div className=\"flex items-center gap-2 text-gray-600\">\n          <Users className=\"w-4 h-4\" />\n          <span>{ride.availableSeats} of {ride.totalSeats} seats</span>\n        </div>\n        {ride.pickupPoint && (\n          <div className=\"flex items-center gap-2 text-gray-600 col-span-2\">\n            <Navigation className=\"w-4 h-4\" />\n            <span>Pickup: {ride.pickupPoint}</span>\n          </div>\n        )}\n        {ride.distanceKm && (\n          <div className=\"flex items-center gap-2 text-gray-600\">\n            <MapPin className=\"w-4 h-4\" />\n            <span>{ride.distanceKm} km</span>\n          </div>\n        )}\n      </div>\n\n      <div className=\"flex items-center justify-between pt-3 border-t border-gray-100\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\n            <User className=\"w-4 h-4 text-blue-600\" />\n          </div>\n          <div>\n            <span className=\"text-sm text-gray-700 block\">{ride.driverName}</span>\n            {(ride.driverBranch || ride.driverYear) && (\n              <span className=\"text-xs text-gray-500\">\n                {ride.driverBranch}{ride.driverBranch && ride.driverYear ? ' • ' : ''}{ride.driverYear}\n              </span>\n            )}\n            {ride.driverTrust && (\n              <TrustBadge trust={ride.driverTrust} size=\"sm\" />\n            )}\n          </div>\n        </div>\n        \n        {showRequestBtn && userRole === 'rider' && ride.availableSeats > 0 && (\n          <div className=\"flex items-center gap-2\">\n            {canBeUrgent && (\n              <label className=\"flex items-center gap-1 text-sm cursor-pointer\" data-testid=\"urgent-toggle\">\n                <input\n                  type=\"checkbox\"\n                  checked={isUrgent}\n                  onChange={(e) => setIsUrgent(e.target.checked)}\n                  className=\"rounded text-red-600 focus:ring-red-500\"\n                />\n                <Zap className=\"w-4 h-4 text-red-500\" />\n                <span className=\"text-red-600 font-medium\">Urgent</span>\n              </label>\n            )}\n            <button\n              onClick={handleRequest}\n              disabled={requesting}\n              className=\"btn-primary flex items-center gap-2\"\n              data-testid=\"request-ride-btn\"\n            >\n              {requesting ? 'Requesting...' : 'Request Ride'}\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// Ride Search/Filter Component with Community Filters\nconst RideSearch = ({ onSearch, pickupPoints, eventTags, academicOptions }) => {\n  const [filters, setFilters] = useState({\n    source: '',\n    destination: '',\n    timeWindowStart: '',\n    timeWindowEnd: '',\n    eventTag: '',\n    branch: '',\n    academicYear: ''\n  });\n  const [showFilters, setShowFilters] = useState(false);\n  const [showCommunity, setShowCommunity] = useState(false);\n\n  const handleSearch = () => {\n    onSearch(filters);\n  };\n\n  const handleReset = () => {\n    setFilters({\n      source: '',\n      destination: '',\n      timeWindowStart: '',\n      timeWindowEnd: '',\n      eventTag: '',\n      branch: '',\n      academicYear: ''\n    });\n    onSearch({});\n  };\n\n  return (\n    <div className=\"card mb-6\" data-testid=\"ride-search\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"font-semibold text-gray-900 flex items-center gap-2\">\n          <Search className=\"w-5 h-5 text-blue-600\" />\n          Find Rides\n        </h3>\n        <div className=\"flex gap-2\">\n          <button\n            onClick={() => setShowCommunity(!showCommunity)}\n            className={`flex items-center gap-1 text-sm font-medium px-3 py-1 rounded-full ${\n              showCommunity ? 'bg-purple-100 text-purple-700' : 'text-purple-600 hover:bg-purple-50'\n            }`}\n            data-testid=\"toggle-community-btn\"\n          >\n            <Users className=\"w-4 h-4\" />\n            Community\n          </button>\n          <button\n            onClick={() => setShowFilters(!showFilters)}\n            className=\"flex items-center gap-1 text-blue-600 text-sm font-medium\"\n            data-testid=\"toggle-filters-btn\"\n          >\n            <Filter className=\"w-4 h-4\" />\n            {showFilters ? 'Hide' : 'More'} Filters\n          </button>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">From</label>\n          <input\n            type=\"text\"\n            value={filters.source}\n            onChange={(e) => setFilters({ ...filters, source: e.target.value })}\n            className=\"input-field\"\n            placeholder=\"Enter source location\"\n            data-testid=\"search-source-input\"\n          />\n        </div>\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">To</label>\n          <input\n            type=\"text\"\n            value={filters.destination}\n            onChange={(e) => setFilters({ ...filters, destination: e.target.value })}\n            className=\"input-field\"\n            placeholder=\"Enter destination\"\n            data-testid=\"search-destination-input\"\n          />\n        </div>\n      </div>\n\n      {/* Event Tag Filter */}\n      {eventTags && eventTags.length > 0 && (\n        <div className=\"mt-4\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            <Tag className=\"w-4 h-4 inline mr-1\" />\n            Filter by Event\n          </label>\n          <div className=\"flex flex-wrap gap-2\">\n            <button\n              onClick={() => setFilters({ ...filters, eventTag: '' })}\n              className={`px-3 py-1 rounded-full text-sm border transition-colors ${\n                !filters.eventTag \n                  ? 'bg-blue-100 border-blue-300 text-blue-700' \n                  : 'border-gray-200 hover:border-gray-300'\n              }`}\n              data-testid=\"event-all-btn\"\n            >\n              All Events\n            </button>\n            {eventTags.map((tag) => (\n              <button\n                key={tag.id}\n                onClick={() => setFilters({ ...filters, eventTag: tag.id })}\n                className={`px-3 py-1 rounded-full text-sm border transition-colors ${\n                  filters.eventTag === tag.id \n                    ? 'border-2' \n                    : 'border-gray-200 hover:border-gray-300'\n                }`}\n                style={filters.eventTag === tag.id ? { \n                  backgroundColor: `${tag.color}20`, \n                  borderColor: tag.color,\n                  color: tag.color\n                } : {}}\n                data-testid={`event-filter-${tag.id}`}\n              >\n                {tag.icon} {tag.name}\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Community Filters */}\n      {showCommunity && (\n        <div className=\"mt-4 p-4 bg-purple-50 rounded-lg border border-purple-200\">\n          <h4 className=\"font-medium text-purple-800 mb-3 flex items-center gap-2\">\n            <GraduationCap className=\"w-4 h-4\" />\n            Find Rides from Your Community\n          </h4>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Branch</label>\n              <select\n                value={filters.branch}\n                onChange={(e) => setFilters({ ...filters, branch: e.target.value })}\n                className=\"input-field\"\n                data-testid=\"filter-branch-select\"\n              >\n                <option value=\"\">All Branches</option>\n                {academicOptions?.branches?.map((b) => (\n                  <option key={b} value={b}>{b}</option>\n                ))}\n              </select>\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Academic Year</label>\n              <select\n                value={filters.academicYear}\n                onChange={(e) => setFilters({ ...filters, academicYear: e.target.value })}\n                className=\"input-field\"\n                data-testid=\"filter-year-select\"\n              >\n                <option value=\"\">All Years</option>\n                {academicOptions?.academic_years?.map((y) => (\n                  <option key={y} value={y}>{y}</option>\n                ))}\n              </select>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {showFilters && (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 pt-4 border-t border-gray-100\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              <Clock className=\"w-4 h-4 inline mr-1\" />\n              Time Window Start\n            </label>\n            <input\n              type=\"datetime-local\"\n              value={filters.timeWindowStart}\n              onChange={(e) => setFilters({ ...filters, timeWindowStart: e.target.value })}\n              className=\"input-field\"\n              data-testid=\"time-start-input\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              <Clock className=\"w-4 h-4 inline mr-1\" />\n              Time Window End\n            </label>\n            <input\n              type=\"datetime-local\"\n              value={filters.timeWindowEnd}\n              onChange={(e) => setFilters({ ...filters, timeWindowEnd: e.target.value })}\n              className=\"input-field\"\n              data-testid=\"time-end-input\"\n            />\n          </div>\n        </div>\n      )}\n\n      <div className=\"flex gap-3 mt-4\">\n        <button\n          onClick={handleSearch}\n          className=\"btn-primary flex items-center gap-2\"\n          data-testid=\"search-btn\"\n        >\n          <Search className=\"w-4 h-4\" />\n          Search Rides\n        </button>\n        <button\n          onClick={handleReset}\n          className=\"btn-secondary\"\n          data-testid=\"reset-search-btn\"\n        >\n          Reset\n        </button>\n      </div>\n    </div>\n  );\n};\n\n// Post Ride Form with Event Tag\nconst PostRideForm = ({ pickupPoints, eventTags, onSubmit, onCancel }) => {\n  const [formData, setFormData] = useState({\n    source: '',\n    destination: '',\n    departureTime: '',\n    totalSeats: 3,\n    estimatedCost: '',\n    pickupPoint: '',\n    isRecurring: false,\n    recurrencePattern: '',\n    eventTag: '',\n    distanceKm: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n    \n    try {\n      const data = {\n        ...formData,\n        departure_time: new Date(formData.departureTime).toISOString(),\n        total_seats: parseInt(formData.totalSeats),\n        estimated_cost: parseFloat(formData.estimatedCost),\n        pickup_point: formData.pickupPoint || null,\n        is_recurring: formData.isRecurring,\n        recurrence_pattern: formData.isRecurring ? formData.recurrencePattern : null,\n        event_tag: formData.eventTag || null,\n        distance_km: formData.distanceKm ? parseFloat(formData.distanceKm) : null\n      };\n      await onSubmit(data);\n    } catch (err) {\n      setError(err.response?.data?.detail || 'Failed to post ride');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"card\" data-testid=\"post-ride-form\">\n      <h3 className=\"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2\">\n        <Plus className=\"w-6 h-6 text-blue-600\" />\n        Post a New Ride\n      </h3>\n\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4\" data-testid=\"post-ride-error\">\n          {error}\n        </div>\n      )}\n\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">From *</label>\n            <input\n              type=\"text\"\n              value={formData.source}\n              onChange={(e) => setFormData({ ...formData, source: e.target.value })}\n              className=\"input-field\"\n              placeholder=\"Starting location\"\n              required\n              data-testid=\"ride-source-input\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">To *</label>\n            <input\n              type=\"text\"\n              value={formData.destination}\n              onChange={(e) => setFormData({ ...formData, destination: e.target.value })}\n              className=\"input-field\"\n              placeholder=\"Destination\"\n              required\n              data-testid=\"ride-destination-input\"\n            />\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Departure Time *</label>\n            <input\n              type=\"datetime-local\"\n              value={formData.departureTime}\n              onChange={(e) => setFormData({ ...formData, departureTime: e.target.value })}\n              className=\"input-field\"\n              required\n              data-testid=\"ride-time-input\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              <Navigation className=\"w-4 h-4 inline mr-1\" />\n              Pickup Point\n            </label>\n            <select\n              value={formData.pickupPoint}\n              onChange={(e) => setFormData({ ...formData, pickupPoint: e.target.value })}\n              className=\"input-field\"\n              data-testid=\"pickup-point-select\"\n            >\n              <option value=\"\">Select pickup point (optional)</option>\n              {pickupPoints.map((point) => (\n                <option key={point} value={point}>{point}</option>\n              ))}\n            </select>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Available Seats *</label>\n            <input\n              type=\"number\"\n              min=\"1\"\n              max=\"8\"\n              value={formData.totalSeats}\n              onChange={(e) => setFormData({ ...formData, totalSeats: e.target.value })}\n              className=\"input-field\"\n              required\n              data-testid=\"ride-seats-input\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Estimated Cost ($) *</label>\n            <input\n              type=\"number\"\n              min=\"0\"\n              step=\"0.01\"\n              value={formData.estimatedCost}\n              onChange={(e) => setFormData({ ...formData, estimatedCost: e.target.value })}\n              className=\"input-field\"\n              placeholder=\"Total trip cost\"\n              required\n              data-testid=\"ride-cost-input\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n              <MapPin className=\"w-4 h-4 inline mr-1\" />\n              Distance (km)\n            </label>\n            <input\n              type=\"number\"\n              min=\"0\"\n              step=\"0.1\"\n              value={formData.distanceKm}\n              onChange={(e) => setFormData({ ...formData, distanceKm: e.target.value })}\n              className=\"input-field\"\n              placeholder=\"Approx distance\"\n              data-testid=\"ride-distance-input\"\n            />\n          </div>\n        </div>\n\n        {/* Event Tag Selection */}\n        {eventTags && eventTags.length > 0 && (\n          <div className=\"p-4 bg-indigo-50 rounded-lg border border-indigo-100\">\n            <label className=\"block text-sm font-medium text-indigo-800 mb-3\">\n              <Tag className=\"w-4 h-4 inline mr-1\" />\n              Tag this ride with an event (optional)\n            </label>\n            <div className=\"flex flex-wrap gap-2\">\n              <button\n                type=\"button\"\n                onClick={() => setFormData({ ...formData, eventTag: '' })}\n                className={`px-3 py-2 rounded-lg border-2 transition-all ${\n                  !formData.eventTag \n                    ? 'border-indigo-600 bg-indigo-100 text-indigo-700' \n                    : 'border-gray-200 hover:border-gray-300'\n                }`}\n                data-testid=\"event-none-btn\"\n              >\n                No Event\n              </button>\n              {eventTags.map((tag) => (\n                <button\n                  key={tag.id}\n                  type=\"button\"\n                  onClick={() => setFormData({ ...formData, eventTag: tag.id })}\n                  className={`px-3 py-2 rounded-lg border-2 transition-all ${\n                    formData.eventTag === tag.id \n                      ? 'border-2' \n                      : 'border-gray-200 hover:border-gray-300'\n                  }`}\n                  style={formData.eventTag === tag.id ? {\n                    backgroundColor: `${tag.color}20`,\n                    borderColor: tag.color,\n                    color: tag.color\n                  } : {}}\n                  data-testid={`event-select-${tag.id}`}\n                >\n                  {tag.icon} {tag.name}\n                </button>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Recurring Ride Options */}\n        <div className=\"p-4 bg-purple-50 rounded-lg border border-purple-100\">\n          <label className=\"flex items-center gap-3 cursor-pointer mb-3\" data-testid=\"recurring-toggle\">\n            <input\n              type=\"checkbox\"\n              checked={formData.isRecurring}\n              onChange={(e) => setFormData({ ...formData, isRecurring: e.target.checked })}\n              className=\"w-5 h-5 rounded text-purple-600 focus:ring-purple-500\"\n            />\n            <div className=\"flex items-center gap-2\">\n              <Repeat className=\"w-5 h-5 text-purple-600\" />\n              <span className=\"font-medium text-purple-900\">Make this a recurring ride</span>\n            </div>\n          </label>\n          \n          {formData.isRecurring && (\n            <div className=\"ml-8\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Recurrence Pattern</label>\n              <div className=\"flex flex-wrap gap-3\">\n                {[\n                  { value: 'weekdays', label: 'Weekdays', desc: '(Mon-Fri for 2 weeks)' },\n                  { value: 'daily', label: 'Daily', desc: '(Next 7 days)' },\n                  { value: 'weekly', label: 'Weekly', desc: '(Next 4 weeks)' }\n                ].map((pattern) => (\n                  <button\n                    key={pattern.value}\n                    type=\"button\"\n                    onClick={() => setFormData({ ...formData, recurrencePattern: pattern.value })}\n                    className={`px-4 py-2 rounded-lg border-2 transition-all ${\n                      formData.recurrencePattern === pattern.value\n                        ? 'border-purple-600 bg-purple-100 text-purple-700'\n                        : 'border-gray-200 hover:border-purple-300'\n                    }`}\n                    data-testid={`recurrence-${pattern.value}`}\n                  >\n                    <span className=\"font-medium\">{pattern.label}</span>\n                    <span className=\"text-xs text-gray-500 block\">{pattern.desc}</span>\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n\n        <div className=\"flex gap-3 pt-4\">\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"btn-primary flex items-center gap-2\"\n            data-testid=\"submit-ride-btn\"\n          >\n            {loading ? 'Posting...' : 'Post Ride'}\n          </button>\n          <button\n            type=\"button\"\n            onClick={onCancel}\n            className=\"btn-secondary\"\n            data-testid=\"cancel-post-btn\"\n          >\n            Cancel\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\n// Request Card Component\nconst RequestCard = ({ request, onAccept, onReject, isDriverView = false, onRate, onConfirmSafe }) => {\n  const [loading, setLoading] = useState(false);\n\n  const handleAction = async (action) => {\n    setLoading(true);\n    try {\n      if (action === 'accept') {\n        await onAccept(request.id);\n      } else {\n        await onReject(request.id);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const showRatingPrompt = request.pendingRating && request.ride?.status === 'completed';\n  const showSafeConfirm = request.status === 'accepted' && request.ride?.status === 'completed' && !request.safelyConfirmed;\n\n  return (\n    <div className={`card ${request.isUrgent ? 'ring-2 ring-red-500' : ''}`} data-testid={`request-card-${request.id}`}>\n      <div className=\"flex items-start justify-between\">\n        <div className=\"flex-1\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            {request.isUrgent && (\n              <Badge variant=\"urgent\">\n                <Zap className=\"w-3 h-3 inline mr-1\" />\n                Urgent\n              </Badge>\n            )}\n            <Badge variant={request.status}>{request.status}</Badge>\n            {request.ride?.status === 'completed' && (\n              <Badge variant=\"completed\">\n                <Check className=\"w-3 h-3 inline mr-1\" />\n                Completed\n              </Badge>\n            )}\n          </div>\n          \n          {isDriverView ? (\n            <div>\n              <p className=\"font-medium text-gray-900\">{request.riderName}</p>\n              {(request.riderBranch || request.riderYear) && (\n                <p className=\"text-xs text-gray-500\">\n                  {request.riderBranch}{request.riderBranch && request.riderYear ? ' • ' : ''}{request.riderYear}\n                </p>\n              )}\n              {request.riderTrust && (\n                <TrustBadge trust={request.riderTrust} size=\"sm\" />\n              )}\n            </div>\n          ) : (\n            <div className=\"text-sm text-gray-600\">\n              <p><span className=\"font-medium\">Route:</span> {request.ride?.source} → {request.ride?.destination}</p>\n              <p><span className=\"font-medium\">Driver:</span> {request.ride?.driverName}</p>\n              {request.ride?.pickupPoint && (\n                <p><span className=\"font-medium\">Pickup:</span> {request.ride?.pickupPoint}</p>\n              )}\n            </div>\n          )}\n          \n          <p className=\"text-xs text-gray-500 mt-2\">\n            {formatDistanceToNow(parseISO(request.createdAt), { addSuffix: true })}\n          </p>\n        </div>\n\n        {isDriverView && request.status === 'pending' && (\n          <div className=\"flex gap-2\">\n            <button\n              onClick={() => handleAction('accept')}\n              disabled={loading}\n              className=\"p-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors\"\n              data-testid=\"accept-request-btn\"\n            >\n              <Check className=\"w-5 h-5\" />\n            </button>\n            <button\n              onClick={() => handleAction('reject')}\n              disabled={loading}\n              className=\"p-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors\"\n              data-testid=\"reject-request-btn\"\n            >\n              <X className=\"w-5 h-5\" />\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Show actions for completed rides */}\n      {(showRatingPrompt || showSafeConfirm) && (\n        <div className=\"mt-4 pt-4 border-t border-gray-100 flex flex-wrap gap-3\">\n          {showSafeConfirm && (\n            <SafeCompletionButton\n              rideId={request.rideId}\n              onConfirm={onConfirmSafe}\n              confirmed={request.safelyConfirmed}\n            />\n          )}\n          {showRatingPrompt && (\n            <button\n              onClick={() => onRate(request.rideId, request.pendingRating)}\n              className=\"flex items-center gap-2 bg-yellow-100 text-yellow-800 px-4 py-2 rounded-lg hover:bg-yellow-200 transition-colors\"\n              data-testid=\"rate-driver-btn\"\n            >\n              <Star className=\"w-5 h-5\" />\n              Rate Driver\n            </button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Ride History Card Component\nconst HistoryCard = ({ ride }) => {\n  const departureTime = parseISO(ride.departureTime);\n\n  return (\n    <div className=\"card\" data-testid={`history-card-${ride.id}`}>\n      <div className=\"flex items-start justify-between mb-4\">\n        <div className=\"flex-1\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <Badge variant={ride.status}>{ride.status}</Badge>\n            <Badge variant={ride.role === 'driver' ? 'recurring' : 'recommended'}>\n              {ride.role === 'driver' ? 'As Driver' : 'As Rider'}\n            </Badge>\n            {ride.safelyConfirmed && (\n              <Badge variant=\"trusted\">\n                <ShieldCheck className=\"w-3 h-3 inline mr-1\" />\n                Safe\n              </Badge>\n            )}\n          </div>\n          <div className=\"flex items-center gap-2 mb-1\">\n            <div className=\"w-2 h-2 rounded-full bg-green-500\"></div>\n            <span className=\"font-medium text-gray-900\">{ride.source}</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-2 h-2 rounded-full bg-red-500\"></div>\n            <span className=\"font-medium text-gray-900\">{ride.destination}</span>\n          </div>\n        </div>\n        <div className=\"text-right\">\n          <div className=\"text-lg font-bold text-blue-600\">\n            ${ride.role === 'driver' ? ride.estimatedCost : ride.costPaid}\n          </div>\n          <div className=\"text-xs text-gray-500\">\n            {ride.role === 'driver' ? 'total earned' : 'paid'}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex items-center justify-between text-sm text-gray-600\">\n        <div className=\"flex items-center gap-2\">\n          <Clock className=\"w-4 h-4\" />\n          <span>{format(departureTime, 'MMM d, yyyy h:mm a')}</span>\n        </div>\n        {ride.distanceKm && (\n          <div className=\"flex items-center gap-2\">\n            <MapPin className=\"w-4 h-4\" />\n            <span>{ride.distanceKm} km</span>\n          </div>\n        )}\n        {ride.role === 'driver' && (\n          <div className=\"flex items-center gap-2\">\n            <Users className=\"w-4 h-4\" />\n            <span>{ride.ridersCount} rider{ride.ridersCount !== 1 ? 's' : ''}</span>\n          </div>\n        )}\n        {ride.role === 'rider' && ride.driverName && (\n          <div className=\"flex items-center gap-2\">\n            <User className=\"w-4 h-4\" />\n            <span>{ride.driverName}</span>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// User Profile Card Component with Badges\nconst ProfileCard = ({ user, onLogout, onUpdateProfile }) => {\n  const [editing, setEditing] = useState(false);\n  const [academicOptions, setAcademicOptions] = useState({ branches: [], academic_years: [] });\n  const [formData, setFormData] = useState({\n    branch: user.branch || '',\n    academicYear: user.academicYear || ''\n  });\n  const [saving, setSaving] = useState(false);\n\n  useEffect(() => {\n    const fetchOptions = async () => {\n      try {\n        const response = await api.get('/api/academic-options');\n        setAcademicOptions(response.data);\n      } catch (err) {\n        console.error('Failed to fetch academic options:', err);\n      }\n    };\n    fetchOptions();\n  }, []);\n\n  const handleSave = async () => {\n    setSaving(true);\n    try {\n      await onUpdateProfile(formData);\n      setEditing(false);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"profile-card\">\n      <div className=\"card\">\n        <div className=\"flex items-center gap-4 mb-6\">\n          <div className=\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center\">\n            <User className=\"w-8 h-8 text-blue-600\" />\n          </div>\n          <div>\n            <h2 className=\"text-xl font-bold text-gray-900\">{user.name}</h2>\n            <p className=\"text-gray-600 capitalize\">{user.role}</p>\n            {(user.branch || user.academicYear) && (\n              <p className=\"text-sm text-gray-500\">\n                {user.branch}{user.branch && user.academicYear ? ' • ' : ''}{user.academicYear}\n              </p>\n            )}\n          </div>\n        </div>\n\n        {/* Badges */}\n        {user.badges && user.badges.length > 0 && (\n          <div className=\"mb-6\">\n            <h3 className=\"text-sm font-medium text-gray-700 mb-2 flex items-center gap-2\">\n              <Trophy className=\"w-4 h-4 text-amber-500\" />\n              Your Badges\n            </h3>\n            <UserBadgeDisplay badges={user.badges} />\n          </div>\n        )}\n\n        {/* Streak */}\n        {user.streak && user.streak.currentStreak > 0 && (\n          <div className=\"mb-6\">\n            <StreakDisplay streak={user.streak} />\n          </div>\n        )}\n\n        {user.avgRating !== undefined && (\n          <div className=\"grid grid-cols-3 gap-4 mb-6\">\n            <div className=\"text-center p-3 bg-gray-50 rounded-lg\">\n              <div className=\"flex items-center justify-center gap-1 mb-1\">\n                <Star className=\"w-5 h-5 text-yellow-500 fill-yellow-500\" />\n                <span className=\"text-xl font-bold text-gray-900\">{user.avgRating || '-'}</span>\n              </div>\n              <p className=\"text-xs text-gray-500\">Rating</p>\n            </div>\n            <div className=\"text-center p-3 bg-gray-50 rounded-lg\">\n              <div className=\"text-xl font-bold text-gray-900\">{user.totalRides || 0}</div>\n              <p className=\"text-xs text-gray-500\">Rides</p>\n            </div>\n            <div className=\"text-center p-3 bg-gray-50 rounded-lg\">\n              <div className=\"text-xl font-bold text-gray-900\">{user.ratingCount || 0}</div>\n              <p className=\"text-xs text-gray-500\">Reviews</p>\n            </div>\n          </div>\n        )}\n\n        {user.trustLabel && (\n          <div className=\"mb-6\">\n            <TrustBadge trust={user} showRating={false} />\n          </div>\n        )}\n\n        {/* Academic Info Editor */}\n        {editing ? (\n          <div className=\"space-y-4 mb-6 p-4 bg-gray-50 rounded-lg\">\n            <h3 className=\"font-medium text-gray-900\">Edit Academic Info</h3>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Branch</label>\n                <select\n                  value={formData.branch}\n                  onChange={(e) => setFormData({ ...formData, branch: e.target.value })}\n                  className=\"input-field\"\n                  data-testid=\"edit-branch-select\"\n                >\n                  <option value=\"\">Select branch</option>\n                  {academicOptions.branches.map((b) => (\n                    <option key={b} value={b}>{b}</option>\n                  ))}\n                </select>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Year</label>\n                <select\n                  value={formData.academicYear}\n                  onChange={(e) => setFormData({ ...formData, academicYear: e.target.value })}\n                  className=\"input-field\"\n                  data-testid=\"edit-year-select\"\n                >\n                  <option value=\"\">Select year</option>\n                  {academicOptions.academic_years.map((y) => (\n                    <option key={y} value={y}>{y}</option>\n                  ))}\n                </select>\n              </div>\n            </div>\n            <div className=\"flex gap-2\">\n              <button\n                onClick={handleSave}\n                disabled={saving}\n                className=\"btn-primary\"\n                data-testid=\"save-profile-btn\"\n              >\n                {saving ? 'Saving...' : 'Save'}\n              </button>\n              <button\n                onClick={() => setEditing(false)}\n                className=\"btn-secondary\"\n                data-testid=\"cancel-edit-btn\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        ) : (\n          <button\n            onClick={() => setEditing(true)}\n            className=\"w-full btn-secondary mb-4 flex items-center justify-center gap-2\"\n            data-testid=\"edit-profile-btn\"\n          >\n            <GraduationCap className=\"w-5 h-5\" />\n            Edit Academic Info\n          </button>\n        )}\n\n        <button\n          onClick={onLogout}\n          className=\"w-full btn-secondary flex items-center justify-center gap-2 text-red-600 border-red-200 hover:bg-red-50\"\n          data-testid=\"profile-logout-btn\"\n        >\n          <LogOut className=\"w-5 h-5\" />\n          Logout\n        </button>\n      </div>\n    </div>\n  );\n};\n\n// Main App Component\nfunction App() {\n  const auth = useAuth();\n  const [view, setView] = useState('rides'); // rides, myRides, requests, post, history, profile, stats\n  const [rides, setRides] = useState([]);\n  const [myRides, setMyRides] = useState([]);\n  const [myRequests, setMyRequests] = useState([]);\n  const [history, setHistory] = useState([]);\n  const [pickupPoints, setPickupPoints] = useState([]);\n  const [eventTags, setEventTags] = useState([]);\n  const [academicOptions, setAcademicOptions] = useState({ branches: [], academic_years: [] });\n  const [loading, setLoading] = useState(false);\n  const [notification, setNotification] = useState(null);\n  \n  // Rating modal state\n  const [ratingModal, setRatingModal] = useState({\n    isOpen: false,\n    rideId: null,\n    userToRate: null\n  });\n\n  // Fetch pickup points\n  const fetchPickupPoints = useCallback(async () => {\n    try {\n      const response = await api.get('/api/pickup-points');\n      setPickupPoints(response.data.pickup_points);\n    } catch (err) {\n      console.error('Failed to fetch pickup points:', err);\n    }\n  }, []);\n\n  // Fetch event tags\n  const fetchEventTags = useCallback(async () => {\n    try {\n      const response = await api.get('/api/event-tags');\n      setEventTags(response.data.event_tags);\n    } catch (err) {\n      console.error('Failed to fetch event tags:', err);\n    }\n  }, []);\n\n  // Fetch academic options\n  const fetchAcademicOptions = useCallback(async () => {\n    try {\n      const response = await api.get('/api/academic-options');\n      setAcademicOptions(response.data);\n    } catch (err) {\n      console.error('Failed to fetch academic options:', err);\n    }\n  }, []);\n\n  // Fetch all rides\n  const fetchRides = useCallback(async (filters = {}) => {\n    setLoading(true);\n    try {\n      const params = new URLSearchParams();\n      if (filters.source) params.append('source', filters.source);\n      if (filters.destination) params.append('destination', filters.destination);\n      if (filters.timeWindowStart) params.append('time_window_start', new Date(filters.timeWindowStart).toISOString());\n      if (filters.timeWindowEnd) params.append('time_window_end', new Date(filters.timeWindowEnd).toISOString());\n      if (filters.eventTag) params.append('event_tag', filters.eventTag);\n      if (filters.branch) params.append('branch', filters.branch);\n      if (filters.academicYear) params.append('academic_year', filters.academicYear);\n      \n      const response = await api.get(`/api/rides?${params.toString()}`);\n      setRides(response.data.rides);\n    } catch (err) {\n      showNotification('Failed to fetch rides', 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Fetch driver's rides\n  const fetchMyRides = useCallback(async () => {\n    try {\n      const response = await api.get('/api/rides/driver/my-rides');\n      setMyRides(response.data.rides);\n    } catch (err) {\n      console.error('Failed to fetch my rides:', err);\n    }\n  }, []);\n\n  // Fetch rider's requests\n  const fetchMyRequests = useCallback(async () => {\n    try {\n      const response = await api.get('/api/requests/my-requests');\n      setMyRequests(response.data.requests);\n    } catch (err) {\n      console.error('Failed to fetch my requests:', err);\n    }\n  }, []);\n\n  // Fetch ride history\n  const fetchHistory = useCallback(async () => {\n    try {\n      const endpoint = auth.user?.role === 'driver' ? '/api/history/driver' : '/api/history/rider';\n      const response = await api.get(endpoint);\n      setHistory(response.data.history);\n    } catch (err) {\n      console.error('Failed to fetch history:', err);\n    }\n  }, [auth.user?.role]);\n\n  // Show notification\n  const showNotification = (message, type = 'success') => {\n    setNotification({ message, type });\n    setTimeout(() => setNotification(null), 3000);\n  };\n\n  // Request a ride\n  const requestRide = async (rideId, isUrgent = false) => {\n    try {\n      await api.post('/api/requests', { ride_id: rideId, is_urgent: isUrgent });\n      showNotification(isUrgent ? 'Urgent ride request sent!' : 'Ride request sent!');\n      fetchRides();\n      fetchMyRequests();\n    } catch (err) {\n      showNotification(err.response?.data?.detail || 'Failed to request ride', 'error');\n    }\n  };\n\n  // Post a ride\n  const postRide = async (rideData) => {\n    try {\n      const response = await api.post('/api/rides', rideData);\n      const msg = response.data.recurring_rides_created > 0\n        ? `Ride posted! ${response.data.recurring_rides_created} recurring rides created.`\n        : 'Ride posted successfully!';\n      showNotification(msg);\n      setView('myRides');\n      fetchMyRides();\n    } catch (err) {\n      throw err;\n    }\n  };\n\n  // Accept request\n  const acceptRequest = async (requestId) => {\n    try {\n      await api.patch(`/api/requests/${requestId}/accept`);\n      showNotification('Request accepted!');\n      fetchMyRides();\n    } catch (err) {\n      showNotification(err.response?.data?.detail || 'Failed to accept request', 'error');\n    }\n  };\n\n  // Reject request\n  const rejectRequest = async (requestId) => {\n    try {\n      await api.patch(`/api/requests/${requestId}/reject`);\n      showNotification('Request rejected');\n      fetchMyRides();\n    } catch (err) {\n      showNotification(err.response?.data?.detail || 'Failed to reject request', 'error');\n    }\n  };\n\n  // Submit rating\n  const submitRating = async (ratingData) => {\n    try {\n      await api.post('/api/ratings', ratingData);\n      showNotification('Rating submitted successfully!');\n      fetchMyRequests();\n      fetchMyRides();\n      auth.fetchUserInfo();\n    } catch (err) {\n      throw err;\n    }\n  };\n\n  // Confirm safe completion\n  const confirmSafeCompletion = async (rideId) => {\n    try {\n      await api.post('/api/safe-completion', { ride_id: rideId });\n      showNotification('Safe arrival confirmed!');\n      fetchMyRequests();\n    } catch (err) {\n      showNotification(err.response?.data?.detail || 'Failed to confirm', 'error');\n    }\n  };\n\n  // Update ride status\n  const updateRideStatus = async (rideId, status) => {\n    try {\n      await api.patch(`/api/rides/${rideId}/status?status=${status}`);\n      showNotification(`Ride marked as ${status}!`);\n      fetchMyRides();\n    } catch (err) {\n      showNotification(err.response?.data?.detail || 'Failed to update status', 'error');\n    }\n  };\n\n  // Update profile\n  const updateProfile = async (profileData) => {\n    try {\n      await api.patch('/api/auth/profile', {\n        branch: profileData.branch || null,\n        academic_year: profileData.academicYear || null\n      });\n      showNotification('Profile updated!');\n      auth.fetchUserInfo();\n    } catch (err) {\n      showNotification(err.response?.data?.detail || 'Failed to update profile', 'error');\n    }\n  };\n\n  // Open rating modal\n  const openRatingModal = (rideId, userToRate) => {\n    setRatingModal({\n      isOpen: true,\n      rideId,\n      userToRate\n    });\n  };\n\n  // Auth handlers\n  const handleLogin = async (email, password, name, role, branch, academicYear, isSignup = false) => {\n    if (isSignup) {\n      await auth.signup(email, password, name, role, branch, academicYear);\n    } else {\n      await auth.login(email, password);\n    }\n  };\n\n  // Initial data fetch\n  useEffect(() => {\n    if (auth.user) {\n      fetchPickupPoints();\n      fetchEventTags();\n      fetchAcademicOptions();\n      fetchRides();\n      if (auth.user.role === 'driver') {\n        fetchMyRides();\n      } else {\n        fetchMyRequests();\n      }\n    }\n  }, [auth.user, fetchPickupPoints, fetchEventTags, fetchAcademicOptions, fetchRides, fetchMyRides, fetchMyRequests]);\n\n  if (auth.loading) {\n    return <LoadingSpinner />;\n  }\n\n  if (!auth.user) {\n    return <AuthPage onLogin={handleLogin} />;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\" data-testid=\"main-app\">\n      {/* Header */}\n      <header className=\"bg-white shadow-sm sticky top-0 z-50\">\n        <div className=\"max-w-6xl mx-auto px-4 py-4 flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center\">\n              <Car className=\"w-5 h-5 text-white\" />\n            </div>\n            <h1 className=\"text-xl font-bold text-gray-900\">CampusPool</h1>\n          </div>\n          \n          <div className=\"flex items-center gap-4\">\n            <button\n              onClick={() => { setView('profile'); auth.fetchUserInfo(); }}\n              className=\"flex items-center gap-2 hover:bg-gray-100 p-2 rounded-lg transition-colors\"\n              data-testid=\"profile-btn\"\n            >\n              <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\n                <User className=\"w-4 h-4 text-blue-600\" />\n              </div>\n              <div className=\"hidden sm:block text-left\">\n                <p className=\"text-sm font-medium text-gray-900\">{auth.user.name}</p>\n                <p className=\"text-xs text-gray-500 capitalize\">{auth.user.role}</p>\n              </div>\n            </button>\n            <button\n              onClick={auth.logout}\n              className=\"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors\"\n              data-testid=\"logout-btn\"\n            >\n              <LogOut className=\"w-5 h-5\" />\n            </button>\n          </div>\n        </div>\n      </header>\n\n      {/* Notification */}\n      {notification && (\n        <div\n          className={`fixed top-20 right-4 z-50 px-6 py-3 rounded-lg shadow-lg ${\n            notification.type === 'error' ? 'bg-red-600' : 'bg-green-600'\n          } text-white font-medium`}\n          data-testid=\"notification\"\n        >\n          {notification.message}\n        </div>\n      )}\n\n      {/* Rating Modal */}\n      <RatingModal\n        isOpen={ratingModal.isOpen}\n        onClose={() => setRatingModal({ isOpen: false, rideId: null, userToRate: null })}\n        rideId={ratingModal.rideId}\n        userToRate={ratingModal.userToRate}\n        onSubmit={submitRating}\n      />\n\n      {/* Navigation */}\n      <nav className=\"bg-white border-b\">\n        <div className=\"max-w-6xl mx-auto px-4\">\n          <div className=\"flex gap-1 overflow-x-auto\">\n            <button\n              onClick={() => { setView('rides'); fetchRides(); }}\n              className={`px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap ${\n                view === 'rides' ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700'\n              }`}\n              data-testid=\"nav-rides\"\n            >\n              <Search className=\"w-4 h-4 inline mr-2\" />\n              Find Rides\n            </button>\n            \n            {auth.user.role === 'driver' && (\n              <>\n                <button\n                  onClick={() => { setView('myRides'); fetchMyRides(); }}\n                  className={`px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap ${\n                    view === 'myRides' ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700'\n                  }`}\n                  data-testid=\"nav-my-rides\"\n                >\n                  <Car className=\"w-4 h-4 inline mr-2\" />\n                  My Rides\n                </button>\n                <button\n                  onClick={() => setView('post')}\n                  className={`px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap ${\n                    view === 'post' ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700'\n                  }`}\n                  data-testid=\"nav-post-ride\"\n                >\n                  <Plus className=\"w-4 h-4 inline mr-2\" />\n                  Post Ride\n                </button>\n              </>\n            )}\n            \n            {auth.user.role === 'rider' && (\n              <button\n                onClick={() => { setView('requests'); fetchMyRequests(); }}\n                className={`px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap ${\n                  view === 'requests' ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700'\n                }`}\n                data-testid=\"nav-my-requests\"\n              >\n                <Calendar className=\"w-4 h-4 inline mr-2\" />\n                My Requests\n              </button>\n            )}\n\n            <button\n              onClick={() => { setView('stats'); }}\n              className={`px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap ${\n                view === 'stats' ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700'\n              }`}\n              data-testid=\"nav-stats\"\n            >\n              <BarChart3 className=\"w-4 h-4 inline mr-2\" />\n              Insights\n            </button>\n\n            <button\n              onClick={() => { setView('history'); fetchHistory(); }}\n              className={`px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap ${\n                view === 'history' ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700'\n              }`}\n              data-testid=\"nav-history\"\n            >\n              <History className=\"w-4 h-4 inline mr-2\" />\n              History\n            </button>\n\n            <button\n              onClick={() => { setView('profile'); auth.fetchUserInfo(); }}\n              className={`px-4 py-3 font-medium transition-colors border-b-2 whitespace-nowrap ${\n                view === 'profile' ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700'\n              }`}\n              data-testid=\"nav-profile\"\n            >\n              <User className=\"w-4 h-4 inline mr-2\" />\n              Profile\n            </button>\n          </div>\n        </div>\n      </nav>\n\n      {/* Main Content */}\n      <main className=\"max-w-6xl mx-auto px-4 py-6\">\n        {/* Find Rides View */}\n        {view === 'rides' && (\n          <div>\n            <RideSearch \n              onSearch={fetchRides} \n              pickupPoints={pickupPoints}\n              eventTags={eventTags}\n              academicOptions={academicOptions}\n            />\n            \n            {loading ? (\n              <LoadingSpinner />\n            ) : rides.length === 0 ? (\n              <div className=\"card text-center py-12\">\n                <Car className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No rides found</h3>\n                <p className=\"text-gray-500\">Try adjusting your search filters or check back later</p>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {rides.filter(r => r.isRecommended).length > 0 && (\n                  <div className=\"mb-2\">\n                    <h3 className=\"text-sm font-medium text-green-700 mb-3 flex items-center gap-2\">\n                      <Star className=\"w-4 h-4\" />\n                      Recommended for you\n                    </h3>\n                  </div>\n                )}\n                {rides.map((ride) => (\n                  <RideCard\n                    key={ride.id}\n                    ride={ride}\n                    onRequest={requestRide}\n                    userRole={auth.user.role}\n                  />\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* My Rides View (Driver) */}\n        {view === 'myRides' && auth.user.role === 'driver' && (\n          <div>\n            <h2 className=\"text-xl font-bold text-gray-900 mb-6\">My Posted Rides</h2>\n            \n            {myRides.length === 0 ? (\n              <div className=\"card text-center py-12\">\n                <Car className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No rides posted yet</h3>\n                <p className=\"text-gray-500 mb-4\">Start sharing rides with fellow students</p>\n                <button\n                  onClick={() => setView('post')}\n                  className=\"btn-primary\"\n                  data-testid=\"post-first-ride-btn\"\n                >\n                  Post Your First Ride\n                </button>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {myRides.map((ride) => (\n                  <DriverRideCard\n                    key={ride.id}\n                    ride={ride}\n                    onAccept={acceptRequest}\n                    onReject={rejectRequest}\n                    onUpdateStatus={updateRideStatus}\n                    onRate={openRatingModal}\n                  />\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* My Requests View (Rider) */}\n        {view === 'requests' && auth.user.role === 'rider' && (\n          <div>\n            <h2 className=\"text-xl font-bold text-gray-900 mb-6\">My Ride Requests</h2>\n            \n            {myRequests.length === 0 ? (\n              <div className=\"card text-center py-12\">\n                <Calendar className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No requests yet</h3>\n                <p className=\"text-gray-500 mb-4\">Browse available rides and send requests</p>\n                <button\n                  onClick={() => setView('rides')}\n                  className=\"btn-primary\"\n                  data-testid=\"find-rides-btn\"\n                >\n                  Find Rides\n                </button>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {myRequests.map((request) => (\n                  <RequestCard\n                    key={request.id}\n                    request={request}\n                    onRate={openRatingModal}\n                    onConfirmSafe={confirmSafeCompletion}\n                  />\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Post Ride View */}\n        {view === 'post' && auth.user.role === 'driver' && (\n          <PostRideForm\n            pickupPoints={pickupPoints}\n            eventTags={eventTags}\n            onSubmit={postRide}\n            onCancel={() => setView('myRides')}\n          />\n        )}\n\n        {/* Statistics/Insights View */}\n        {view === 'stats' && (\n          <StatisticsDashboard user={auth.user} />\n        )}\n\n        {/* History View */}\n        {view === 'history' && (\n          <div>\n            <h2 className=\"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2\">\n              <History className=\"w-6 h-6 text-blue-600\" />\n              Ride History\n            </h2>\n            \n            {history.length === 0 ? (\n              <div className=\"card text-center py-12\">\n                <History className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No ride history yet</h3>\n                <p className=\"text-gray-500\">Your completed and cancelled rides will appear here</p>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {history.map((ride) => (\n                  <HistoryCard key={ride.id} ride={ride} />\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Profile View */}\n        {view === 'profile' && (\n          <div className=\"max-w-md mx-auto\">\n            <ProfileCard \n              user={auth.user} \n              onLogout={auth.logout}\n              onUpdateProfile={updateProfile}\n            />\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n\n// Driver Ride Card with request management\nconst DriverRideCard = ({ ride, onAccept, onReject, onUpdateStatus, onRate }) => {\n  const [requests, setRequests] = useState([]);\n  const [showRequests, setShowRequests] = useState(false);\n  const [loadingRequests, setLoadingRequests] = useState(false);\n\n  const fetchRequests = async () => {\n    setLoadingRequests(true);\n    try {\n      const response = await api.get(`/api/requests/ride/${ride.id}`);\n      setRequests(response.data.requests);\n    } catch (err) {\n      console.error('Failed to fetch requests:', err);\n    } finally {\n      setLoadingRequests(false);\n    }\n  };\n\n  const handleToggleRequests = () => {\n    if (!showRequests) {\n      fetchRequests();\n    }\n    setShowRequests(!showRequests);\n  };\n\n  const departureTime = parseISO(ride.departureTime);\n  const urgentCount = requests.filter(r => r.isUrgent && r.status === 'pending').length;\n  const hasPendingRatings = ride.pendingRatings && ride.pendingRatings.length > 0;\n\n  return (\n    <div className=\"card\" data-testid={`driver-ride-card-${ride.id}`}>\n      <div className=\"flex flex-wrap gap-2 mb-3\">\n        {ride.eventTag && <EventTagBadge eventTag={ride.eventTag} />}\n        {ride.isRecurring && (\n          <Badge variant=\"recurring\">\n            <Repeat className=\"w-3 h-3 inline mr-1\" />\n            {ride.recurrencePattern || 'Recurring'}\n          </Badge>\n        )}\n        <Badge variant={ride.status}>{ride.status}</Badge>\n      </div>\n\n      <div className=\"flex items-start justify-between mb-4\">\n        <div className=\"flex-1\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <div className=\"w-2 h-2 rounded-full bg-green-500\"></div>\n            <span className=\"font-medium text-gray-900\">{ride.source}</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-2 h-2 rounded-full bg-red-500\"></div>\n            <span className=\"font-medium text-gray-900\">{ride.destination}</span>\n          </div>\n        </div>\n        <div className=\"text-right\">\n          <div className=\"text-lg font-bold text-blue-600\">${ride.estimatedCost}</div>\n          <div className=\"text-xs text-gray-500\">total cost</div>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-2 gap-3 mb-4 text-sm\">\n        <div className=\"flex items-center gap-2 text-gray-600\">\n          <Clock className=\"w-4 h-4\" />\n          <span>{format(departureTime, 'MMM d, h:mm a')}</span>\n        </div>\n        <div className=\"flex items-center gap-2 text-gray-600\">\n          <Users className=\"w-4 h-4\" />\n          <span>{ride.availableSeats} of {ride.totalSeats} seats available</span>\n        </div>\n        {ride.pickupPoint && (\n          <div className=\"flex items-center gap-2 text-gray-600 col-span-2\">\n            <Navigation className=\"w-4 h-4\" />\n            <span>Pickup: {ride.pickupPoint}</span>\n          </div>\n        )}\n        {ride.distanceKm && (\n          <div className=\"flex items-center gap-2 text-gray-600\">\n            <MapPin className=\"w-4 h-4\" />\n            <span>{ride.distanceKm} km</span>\n          </div>\n        )}\n      </div>\n\n      {/* Status Actions */}\n      {ride.status === 'posted' && (\n        <div className=\"flex gap-2 mb-4\">\n          <button\n            onClick={() => onUpdateStatus(ride.id, 'in_progress')}\n            className=\"btn-primary text-sm\"\n            data-testid=\"start-ride-btn\"\n          >\n            Start Ride\n          </button>\n          <button\n            onClick={() => onUpdateStatus(ride.id, 'cancelled')}\n            className=\"btn-secondary text-sm\"\n            data-testid=\"cancel-ride-btn\"\n          >\n            Cancel\n          </button>\n        </div>\n      )}\n\n      {ride.status === 'in_progress' && (\n        <div className=\"mb-4\">\n          <button\n            onClick={() => onUpdateStatus(ride.id, 'completed')}\n            className=\"btn-primary text-sm bg-green-600 hover:bg-green-700\"\n            data-testid=\"complete-ride-btn\"\n          >\n            <Check className=\"w-4 h-4 inline mr-1\" />\n            Mark as Completed\n          </button>\n        </div>\n      )}\n\n      {/* Pending Ratings */}\n      {hasPendingRatings && (\n        <div className=\"mb-4 p-3 bg-yellow-50 rounded-lg border border-yellow-100\">\n          <p className=\"text-sm font-medium text-yellow-800 mb-2 flex items-center gap-2\">\n            <Star className=\"w-4 h-4\" />\n            Rate your riders\n          </p>\n          <div className=\"flex flex-wrap gap-2\">\n            {ride.pendingRatings.map((rider) => (\n              <button\n                key={rider.userId}\n                onClick={() => onRate(ride.id, rider)}\n                className=\"text-sm bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full hover:bg-yellow-200 transition-colors\"\n                data-testid={`rate-rider-${rider.userId}`}\n              >\n                Rate {rider.userName}\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n\n      <button\n        onClick={handleToggleRequests}\n        className=\"w-full flex items-center justify-between px-4 py-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\"\n        data-testid=\"toggle-requests-btn\"\n      >\n        <div className=\"flex items-center gap-2\">\n          <Users className=\"w-5 h-5 text-gray-500\" />\n          <span className=\"font-medium\">Ride Requests</span>\n          {urgentCount > 0 && (\n            <Badge variant=\"urgent\">{urgentCount} urgent</Badge>\n          )}\n        </div>\n        <ChevronRight className={`w-5 h-5 text-gray-400 transition-transform ${showRequests ? 'rotate-90' : ''}`} />\n      </button>\n\n      {showRequests && (\n        <div className=\"mt-4 space-y-3\">\n          {loadingRequests ? (\n            <LoadingSpinner />\n          ) : requests.length === 0 ? (\n            <p className=\"text-gray-500 text-center py-4\">No requests yet</p>\n          ) : (\n            requests.map((request) => (\n              <RequestCard\n                key={request.id}\n                request={request}\n                isDriverView={true}\n                onAccept={onAccept}\n                onReject={onReject}\n              />\n            ))\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}